/*! For license information please see main.8dbfc6d508f3aa518dff.js.LICENSE.txt */
(()=>{"use strict";var n,e={208:(n,e,t)=>{t.d(e,{A:()=>i});var r=t(601),o=t.n(r),a=t(314),c=t.n(a)()(o());c.push([n.id,'/*\n * style.css - Таблица стилей для твоего личного ада.\n * Здесь мы делаем вид, что можем упорядочить хаос.\n */\n\n/* 1. Глобальные переменные и сброс говно-стилей браузера */\n:root {\n  --bg-color: #1a1a1a;\n  --primary-color: #2b2b2b;\n  --secondary-color: #404040;\n  --font-color: #cccccc;\n  --accent-color: #007bff; /* Единственное яркое пятно в этом царстве уныния */\n  --border-color: #555;\n  --danger-color: #dc3545;\n}\n\n* {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n}\n\nhtml,\nbody {\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,\n    Arial, sans-serif;\n  background-color: var(--bg-color);\n  color: var(--font-color);\n  line-height: 1.6;\n  height: 100%;\n}\n\nbody {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 1rem;\n}\n\n/* 2. Основные контейнеры и лэйаут */\n#app-container {\n  width: 100%;\n  max-width: 1200px; /* Чтобы на мониторе 4K не разъезжалось на всю степь */\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\nheader {\n  width: 100%;\n  border-bottom: 1px solid var(--border-color);\n  margin-bottom: 1.5rem;\n}\n\nmain {\n  flex-grow: 1; /* Занимает всё оставшееся место */\n  overflow-y: auto; /* Если контента будет дохуя, появится скролл */\n}\n\n/* Скрываем все "виды", кроме активного. JS будет рулить этим. */\n[data-view-content][hidden] {\n  display: none;\n}\n\n/* 3. Навигация. Flexbox, как ты и просил. */\n#main-nav {\n  display: flex;\n  flex-wrap: wrap; /* На телефонах кнопки перенесутся, а не вылезут за экран */\n  justify-content: center;\n  gap: 0.5rem;\n  padding: 1rem 0;\n}\n.nav-button {\n  background-color: var(--primary-color);\n  color: var(--font-color);\n  border: 1px solid var(--border-color);\n  padding: 0.5rem 1rem;\n  cursor: pointer;\n  border-radius: 5px;\n  transition: background-color 0.2s ease;\n}\n\n.nav-button:hover {\n  background-color: var(--secondary-color);\n}\n\n.nav-button.active {\n  background-color: var(--accent-color);\n  border-color: var(--accent-color);\n  color: #fff;\n  font-weight: bold;\n}\n\n/* 4. Вид "Сегодня". Вот тут Grid для десктопа и Flex для мобилки. */\n#today-view {\n  display: grid;\n  gap: 1.5rem;\n  /* По умолчанию одна колонка - для мобилок заебись */\n  grid-template-columns: 1fr;\n}\n\n/* А вот и магия адаптивности. Если экран шире 768px - делаем две колонки. */\n@media (min-width: 768px) {\n  #today-view {\n    grid-template-columns: 1fr 1fr; /* Две равные колонки */\n  }\n}\n\n.note-editor,\n.recent-notes,\n.view-header {\n  background-color: var(--primary-color);\n  padding: 1.5rem;\n  border-radius: 8px;\n  border: 1px solid var(--border-color);\n}\n\n/* 5. Форма для страданий (добавления записей) */\n#new-note-form {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n\n#new-note-form h3 {\n  text-align: center;\n  margin-bottom: 0.5rem;\n}\n\ntextarea,\ninput[type="text"],\ninput[type="search"] {\n  width: 100%;\n  padding: 0.75rem;\n  background-color: var(--secondary-color);\n  border: 1px solid var(--border-color);\n  color: var(--font-color);\n  border-radius: 5px;\n  resize: vertical; /* Разрешаем менять высоту только textarea */\n}\n\ntextarea:focus,\ninput:focus {\n  outline: none;\n  border-color: var(--accent-color);\n}\n\n#save-note-btn {\n  padding: 0.75rem;\n  background-color: var(--accent-color);\n  color: #fff;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n  font-weight: bold;\n}\n\n.download-button:hover,\n#save-note-btn:hover {\n  opacity: 0.9;\n}\n\n/* 6. Стили для остальных "видов" (неделя, месяц, год) */\n.view-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1.5rem;\n}\n\n.nav-arrow {\n  background: none;\n  border: none;\n  color: var(--font-color);\n  font-size: 2rem;\n  cursor: pointer;\n}\n.export-buttons-group {\n  display: flex;\n  gap: 0.5rem;\n  flex-wrap: wrap;\n}\n\n/* Календари. Тут Grid - сам бог велел. */\n#month-calendar-grid,\n#year-calendar-grid {\n  display: grid;\n  gap: 5px;\n}\n\n#month-calendar-grid {\n  /* 7 колонок для дней недели */\n  grid-template-columns: repeat(7, 1fr);\n}\n\n#year-calendar-grid {\n  /* 12 колонок для месяцев */\n  grid-template-columns: repeat(12, 1fr);\n}\n\n/* Сюда будешь добавлять стили для ячеек календаря, когда допишешь JS */\n#month-calendar-grid > div,\n#year-calendar-grid > div {\n  background-color: var(--secondary-color);\n  aspect-ratio: 1 / 1; /* Делаем ячейки квадратными */\n  border-radius: 3px;\n}\n\n/* === СТИЛИ ДЛЯ ВИДА "СЕГОДНЯ" === */\n\n.empty-state {\n  text-align: center;\n  padding: 3rem 1rem;\n  color: #888;\n}\n\n.empty-state p:first-child {\n  font-size: 2rem;\n  margin-bottom: 0.5rem;\n}\n\n.notes-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1rem;\n  padding-bottom: 0.5rem;\n  border-bottom: 1px solid var(--border-color);\n}\n\n.notes-header h4 {\n  color: var(--font-color);\n  margin: 0;\n}\n\n.notes-list {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n}\n\n.note-item {\n  background-color: var(--secondary-color);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  padding: 1rem;\n  transition: all 0.2s ease;\n  cursor: pointer;\n}\n\n.note-item:hover {\n  border-color: var(--accent-color);\n  background-color: var(--primary-color);\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px rgba(0, 123, 255, 0.1);\n}\n\n.note-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 0.75rem;\n  font-size: 0.85rem;\n}\n\n.note-time {\n  font-weight: bold;\n}\n\n.note-id {\n  color: var(--accent-color);\n  font-family: monospace;\n}\n\n.note-content {\n  line-height: 1.5;\n  margin-bottom: 0.5rem;\n  word-wrap: break-word;\n}\n\n.content-text.truncated {\n  position: relative;\n}\n\n.note-tags {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.25rem;\n  font-size: 0.8rem;\n  color: var(--accent-color);\n}\n\n.note-actions {\n  display: flex;\n  gap: 0.25rem;\n  opacity: 0;\n  transition: opacity 0.2s ease;\n}\n\n.note-item:hover .note-actions,\n.note-item:focus-within .note-actions {\n  opacity: 1;\n}\n\n.note-action-btn {\n  background: rgba(255, 255, 255, 0.1);\n  border: 1px solid var(--border-color);\n  color: var(--font-color);\n  padding: 0.2rem;\n  border-radius: 3px;\n  cursor: pointer;\n  font-size: 0.8rem;\n  transition: all 0.2s ease;\n  width: 22px;\n  height: 22px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  line-height: 1;\n}\n\n.note-action-btn:hover {\n  background-color: var(--accent-color);\n  color: #fff;\n  border-color: var(--accent-color);\n  transform: translateY(-1px);\n}\n\n.copy-btn:hover {\n  background-color: #28a745;\n  border-color: #28a745;\n}\n\n.delete-btn:hover {\n  background-color: var(--danger-color);\n  border-color: var(--danger-color);\n}\n\n.expand-note-btn {\n  background: none;\n  border: none;\n  color: var(--accent-color);\n  cursor: pointer;\n  font-size: 0.8rem;\n  margin-top: 0.5rem;\n  padding: 0.25rem 0;\n  text-decoration: underline;\n  transition: color 0.2s ease;\n  display: block;\n}\n\n.expand-note-btn:hover {\n  color: var(--font-color);\n  text-decoration: none;\n}\n\n.yesterday-notes {\n  margin-top: 2rem;\n  padding-top: 1.5rem;\n  border-top: 2px solid var(--border-color);\n}\n\n.yesterday-notes h4 {\n  color: #888;\n  margin-bottom: 1rem;\n}\n\n.yesterday-notes .note-item {\n  opacity: 0.7;\n}\n\n.error-message {\n  text-align: center;\n  padding: 2rem;\n  background-color: var(--danger-color);\n  border-radius: 8px;\n  color: #fff;\n}\n\n.error-message button {\n  margin-top: 1rem;\n  padding: 0.5rem 1rem;\n  background-color: #fff;\n  color: var(--danger-color);\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-weight: bold;\n}\n\n/* Анимация появления записей */\n.note-item {\n  animation: slideInUp 0.3s ease-out;\n}\n\n@keyframes slideInUp {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n/* Активные состояния навигации */\n.nav-button.active {\n  position: relative;\n}\n\n.nav-button.active::after {\n  content: "";\n  position: absolute;\n  bottom: -2px;\n  left: 0;\n  right: 0;\n  height: 2px;\n  background-color: var(--accent-color);\n}\n\n/* Мобильные стили */\n@media (max-width: 768px) {\n  .note-actions {\n    opacity: 1; /* На мобилках показываем всегда */\n  }\n\n  .note-header {\n    flex-wrap: wrap;\n    gap: 0.5rem;\n  }\n\n  .note-action-btn {\n    width: 28px;\n    height: 28px;\n    font-size: 0.9rem;\n  }\n}\n#save-note-btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.download-button:disabled,\n.export-button:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n/* === СТИЛИ ДЛЯ НЕДЕЛЬНОГО ВИДА === */\n\n.week-grid {\n  display: grid;\n  grid-template-columns: repeat(7, 1fr);\n  gap: 1rem;\n  margin-bottom: 2rem;\n}\n\n.week-day {\n  background-color: var(--primary-color);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  padding: 1rem;\n  min-height: 200px;\n}\n\n.week-day.has-notes {\n  border-color: var(--accent-color);\n  background-color: rgba(0, 123, 255, 0.05);\n}\n\n.day-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1rem;\n  padding-bottom: 0.5rem;\n  border-bottom: 1px solid var(--border-color);\n}\n\n.day-header h4 {\n  font-size: 0.9rem;\n  margin: 0;\n  color: var(--font-color);\n}\n\n.day-date {\n  font-size: 0.8rem;\n  color: #888;\n}\n\n.notes-count {\n  background-color: var(--accent-color);\n  color: #fff;\n  padding: 0.2rem 0.5rem;\n  border-radius: 12px;\n  font-size: 0.7rem;\n  font-weight: bold;\n}\n\n.compact-note {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n  padding: 0.5rem;\n  background-color: var(--secondary-color);\n  border-radius: 4px;\n  margin-bottom: 0.5rem;\n  font-size: 0.8rem;\n}\n\n.compact-time {\n  font-weight: bold;\n  color: var(--accent-color);\n}\n\n.compact-content {\n  line-height: 1.3;\n}\n\n.compact-tags {\n  color: #888;\n  font-size: 0.7rem;\n}\n\n.no-notes {\n  color: #888;\n  font-style: italic;\n  text-align: center;\n}\n\n.week-summary {\n  text-align: center;\n  padding: 1rem;\n  background-color: var(--primary-color);\n  border-radius: 8px;\n}\n\n/* === СТИЛИ ДЛЯ МЕСЯЧНОГО КАЛЕНДАРЯ === */\n\n.month-calendar-grid {\n  display: grid;\n  grid-template-columns: repeat(7, 1fr);\n  gap: 2px;\n  margin-bottom: 2rem;\n  background-color: var(--border-color);\n  border-radius: 8px;\n  padding: 2px;\n}\n\n.calendar-day-header {\n  background-color: var(--primary-color);\n  padding: 0.75rem 0.5rem;\n  text-align: center;\n  font-weight: bold;\n  font-size: 0.8rem;\n  color: #888;\n}\n\n.calendar-day {\n  background-color: var(--secondary-color);\n  min-height: 80px;\n  padding: 0.5rem;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  transition: all 0.2s ease;\n  position: relative;\n}\n\n.calendar-day.empty {\n  background-color: var(--bg-color);\n}\n\n.calendar-day.today {\n  background-color: rgba(0, 123, 255, 0.2);\n  border: 2px solid var(--accent-color);\n}\n\n.calendar-day.has-notes:hover {\n  background-color: var(--accent-color);\n  color: #fff;\n  cursor: pointer;\n  transform: scale(1.05);\n}\n\n.calendar-day.low-activity {\n  background-color: rgba(0, 123, 255, 0.1);\n}\n\n.calendar-day.medium-activity {\n  background-color: rgba(0, 123, 255, 0.3);\n}\n\n.calendar-day.high-activity {\n  background-color: rgba(0, 123, 255, 0.5);\n  color: #fff;\n}\n\n.day-number {\n  font-weight: bold;\n  font-size: 1rem;\n}\n\n.notes-indicator {\n  background-color: var(--accent-color);\n  color: #fff;\n  border-radius: 50%;\n  width: 24px;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 0.7rem;\n  font-weight: bold;\n  align-self: flex-end;\n  margin-top: auto;\n}\n\n.month-stats {\n  background-color: var(--primary-color);\n  border-radius: 8px;\n  padding: 1.5rem;\n  margin-top: 1rem;\n}\n\n.month-stats h4 {\n  margin-bottom: 1rem;\n  text-align: center;\n}\n\n.stats-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));\n  gap: 1rem;\n}\n\n.stat-item {\n  text-align: center;\n  padding: 1rem;\n  background-color: var(--secondary-color);\n  border-radius: 6px;\n}\n\n.stat-number {\n  display: block;\n  font-size: 2rem;\n  font-weight: bold;\n  color: var(--accent-color);\n}\n\n.stat-label {\n  display: block;\n  font-size: 0.8rem;\n  color: #888;\n  margin-top: 0.25rem;\n}\n\n/* === СТИЛИ ДЛЯ ГОДОВОГО ВИДА === */\n\n.year-calendar-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 1.5rem;\n  margin-bottom: 2rem;\n}\n\n.year-month {\n  background-color: var(--primary-color);\n  border: 1px solid var(--border-color);\n  border-radius: 12px;\n  padding: 1.5rem;\n  text-align: center;\n  transition: all 0.3s ease;\n  cursor: pointer;\n}\n\n.year-month:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 8px 25px rgba(0, 123, 255, 0.15);\n  border-color: var(--accent-color);\n}\n\n.month-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1rem;\n}\n\n.month-name {\n  font-weight: bold;\n  font-size: 1.1rem;\n}\n\n.month-number {\n  background-color: var(--accent-color);\n  color: #fff;\n  padding: 0.25rem 0.5rem;\n  border-radius: 12px;\n  font-size: 0.8rem;\n}\n\n.month-count {\n  font-size: 2.5rem;\n  font-weight: bold;\n  color: var(--accent-color);\n  margin-bottom: 1rem;\n}\n\n.month-bar {\n  background-color: var(--secondary-color);\n  height: 8px;\n  border-radius: 4px;\n  overflow: hidden;\n}\n\n.month-bar-fill {\n  background: linear-gradient(90deg, var(--accent-color), #00d4ff);\n  height: 100%;\n  transition: width 0.3s ease;\n}\n\n.year-month.low-activity .month-count {\n  color: #28a745;\n}\n\n.year-month.medium-activity .month-count {\n  color: #ffc107;\n}\n\n.year-month.high-activity .month-count {\n  color: #fd7e14;\n}\n\n.year-month.very-high-activity .month-count {\n  color: #dc3545;\n}\n\n.year-summary {\n  background-color: var(--primary-color);\n  border-radius: 12px;\n  padding: 2rem;\n  margin-top: 2rem;\n}\n\n.year-summary h3 {\n  text-align: center;\n  margin-bottom: 2rem;\n  color: var(--font-color);\n}\n\n.year-stats-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n  gap: 1.5rem;\n  margin-bottom: 2rem;\n}\n\n.year-stat {\n  text-align: center;\n  padding: 1.5rem;\n  background-color: var(--secondary-color);\n  border-radius: 8px;\n}\n\n.stat-value {\n  display: block;\n  font-size: 2.5rem;\n  font-weight: bold;\n  color: var(--accent-color);\n}\n\n.stat-label {\n  display: block;\n  font-size: 0.9rem;\n  color: #888;\n  margin-top: 0.5rem;\n}\n\n.activity-chart {\n  margin-top: 2rem;\n}\n\n.activity-chart h4 {\n  text-align: center;\n  margin-bottom: 1rem;\n}\n\n.chart-bars {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n  height: 150px;\n  padding: 1rem;\n  background-color: var(--secondary-color);\n  border-radius: 8px;\n  gap: 0.5rem;\n}\n\n.chart-bar {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  height: 100%;\n}\n\n.bar-fill {\n  background: linear-gradient(to top, var(--accent-color), #00d4ff);\n  width: 100%;\n  min-height: 2px;\n  border-radius: 2px 2px 0 0;\n  transition: height 0.3s ease;\n}\n\n.bar-label {\n  font-size: 0.7rem;\n  color: #888;\n  margin-top: 0.5rem;\n  writing-mode: vertical-lr;\n  text-orientation: mixed;\n}\n\n/* === МОДАЛЬНОЕ ОКНО === */\n\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.7);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n}\n\n.modal-content {\n  background-color: var(--primary-color);\n  border-radius: 12px;\n  width: 90%;\n  max-width: 600px;\n  max-height: 80vh;\n  overflow-y: auto;\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1.5rem;\n  border-bottom: 1px solid var(--border-color);\n}\n\n.modal-header h3 {\n  margin: 0;\n  color: var(--font-color);\n}\n\n.modal-close {\n  background: none;\n  border: none;\n  font-size: 1.5rem;\n  color: #888;\n  cursor: pointer;\n  padding: 0;\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.modal-close:hover {\n  color: var(--font-color);\n}\n\n.modal-body {\n  padding: 1.5rem;\n}\n\n.day-notes-list {\n  margin-top: 1rem;\n}\n\n/* === АДАПТИВНОСТЬ === */\n\n@media (max-width: 768px) {\n  .week-grid {\n    grid-template-columns: 1fr;\n  }\n\n  .month-calendar-grid {\n    gap: 1px;\n    padding: 1px;\n  }\n\n  .calendar-day {\n    min-height: 60px;\n    padding: 0.25rem;\n  }\n\n  .year-calendar-grid {\n    grid-template-columns: repeat(2, 1fr);\n  }\n\n  .year-stats-grid {\n    grid-template-columns: repeat(2, 1fr);\n  }\n\n  .chart-bars {\n    height: 100px;\n  }\n\n  .bar-label {\n    font-size: 0.6rem;\n  }\n}\n\n@media (max-width: 480px) {\n  .year-calendar-grid {\n    grid-template-columns: 1fr;\n  }\n\n  .year-stats-grid {\n    grid-template-columns: 1fr;\n  }\n}\n\n/* === СТИЛИ ДЛЯ ПОИСКА === */\n.search-container {\n  max-width: 800px;\n  margin: 0 auto;\n  padding: 1rem;\n}\n\n.search-header {\n  text-align: center;\n  margin-bottom: 2rem;\n}\n\n.search-header h3 {\n  color: var(--font-color);\n  margin-bottom: 0.5rem;\n}\n\n.search-header p {\n  color: #888;\n  font-size: 0.9rem;\n}\n\n.search-input-container {\n  margin-bottom: 2rem;\n}\n\n#search-input {\n  width: 100%;\n  font-size: 1.2rem;\n  padding: 1rem;\n  background-color: var(--secondary-color);\n  border: 2px solid var(--border-color);\n  color: var(--font-color);\n  border-radius: 12px;\n  transition: all 0.3s ease;\n}\n\n#search-input:focus {\n  outline: none;\n  border-color: var(--accent-color);\n  box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);\n  transform: translateY(-2px);\n}\n\n.search-hints {\n  margin-top: 0.5rem;\n  text-align: center;\n}\n\n.search-hints small {\n  color: #888;\n  font-size: 0.8rem;\n}\n\n/* Подсказки поиска */\n.search-suggestions {\n  background-color: var(--primary-color);\n  border-radius: 8px;\n  padding: 1.5rem;\n  margin-bottom: 2rem;\n  border: 1px solid var(--border-color);\n}\n\n.suggestions h5 {\n  color: var(--font-color);\n  margin-bottom: 1rem;\n  font-size: 0.9rem;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.tag-suggestions {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.5rem;\n  margin-bottom: 1.5rem;\n}\n\n.tag-suggestion {\n  background-color: var(--secondary-color);\n  color: var(--font-color);\n  border: 1px solid var(--border-color);\n  padding: 0.5rem 0.75rem;\n  border-radius: 20px;\n  cursor: pointer;\n  font-size: 0.85rem;\n  transition: background-color 0.2s ease;\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n}\n\n.tag-suggestion:hover {\n  background-color: var(--accent-color);\n  color: #fff;\n  border-color: var(--accent-color);\n  transform: translateY(-1px);\n}\n\n.tag-count {\n  font-size: 0.7rem;\n  opacity: 0.8;\n}\n\n.search-examples {\n  border-top: 1px solid var(--border-color);\n  padding-top: 1rem;\n}\n\n.example-queries {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.5rem;\n}\n\n.example-query {\n  background: linear-gradient(135deg, var(--accent-color), #0056b3);\n  color: #fff;\n  border: none;\n  padding: 0.4rem 0.8rem;\n  border-radius: 15px;\n  cursor: pointer;\n  font-size: 0.8rem;\n  font-weight: 500;\n  transition: all 0.2s ease;\n}\n\n.example-query:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3);\n}\n\n/* Состояния поиска */\n.search-placeholder,\n.search-loading,\n.search-error {\n  text-align: center;\n  padding: 3rem 1rem;\n  color: #888;\n  background-color: var(--primary-color);\n  border-radius: 8px;\n  margin-bottom: 1rem;\n}\n\n.search-loading {\n  color: var(--accent-color);\n}\n\n.search-error {\n  color: var(--danger-color);\n  background-color: rgba(220, 53, 69, 0.1);\n}\n\n.retry-button {\n  background-color: var(--danger-color);\n  color: #fff;\n  border: none;\n  padding: 0.5rem 1rem;\n  border-radius: 4px;\n  cursor: pointer;\n  margin-top: 1rem;\n}\n\n/* Результаты поиска */\n.search-results-header {\n  background-color: var(--primary-color);\n  padding: 1.5rem;\n  border-radius: 8px;\n  margin-bottom: 1.5rem;\n  text-align: center;\n  border: 1px solid var(--border-color);\n}\n\n.search-results-header h4 {\n  color: var(--accent-color);\n  margin-bottom: 0.5rem;\n}\n\n.search-results-header p {\n  color: #888;\n  margin: 0;\n}\n\n.search-day-group {\n  margin-bottom: 2rem;\n}\n\n.search-day-header {\n  background-color: var(--secondary-color);\n  color: var(--font-color);\n  padding: 0.75rem 1rem;\n  border-radius: 6px;\n  margin-bottom: 1rem;\n  font-size: 0.9rem;\n  font-weight: 600;\n  border-left: 4px solid var(--accent-color);\n}\n\n.search-day-results {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n\n.search-result-item {\n  background-color: var(--primary-color);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  padding: 1.25rem;\n  transition: all 0.2s ease;\n  cursor: pointer;\n}\n\n.search-result-item:hover {\n  border-color: var(--accent-color);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 15px rgba(0, 123, 255, 0.1);\n}\n\n.search-result-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 0.75rem;\n  font-size: 0.85rem;\n}\n\n.search-result-time {\n  color: var(--accent-color);\n  font-weight: 600;\n}\n\n.search-result-id {\n  color: #888;\n  font-family: monospace;\n  background-color: var(--secondary-color);\n  padding: 0.2rem 0.4rem;\n  border-radius: 4px;\n  font-size: 0.75rem;\n}\n\n.search-result-content {\n  line-height: 1.6;\n  margin-bottom: 0.75rem;\n  word-wrap: break-word;\n  color: var(--font-color);\n}\n\n.search-result-tags {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.25rem;\n}\n\n.search-result-tags span {\n  background-color: var(--secondary-color);\n  color: var(--accent-color);\n  padding: 0.2rem 0.5rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 500;\n}\n\n/* Подсветка найденного текста */\nmark {\n  background: linear-gradient(120deg, #ffff00, #ffd700);\n  color: #000;\n  padding: 0.1rem 0.2rem;\n  border-radius: 3px;\n  font-weight: 600;\n}\n\n/* Отсутствие результатов */\n.no-results {\n  text-align: center;\n  padding: 3rem 1.5rem;\n  background-color: var(--primary-color);\n  border-radius: 12px;\n  border: 1px solid var(--border-color);\n}\n\n.no-results h4 {\n  color: var(--font-color);\n  margin-bottom: 1rem;\n  font-size: 1.2rem;\n}\n\n.search-tips {\n  background-color: var(--secondary-color);\n  padding: 1.5rem;\n  border-radius: 8px;\n  margin-top: 1.5rem;\n  text-align: left;\n  max-width: 500px;\n  margin-left: auto;\n  margin-right: auto;\n}\n\n.search-tips h5 {\n  color: var(--accent-color);\n  margin-bottom: 1rem;\n}\n\n.search-tips ul {\n  color: #888;\n  line-height: 1.6;\n}\n\n.search-tips li {\n  margin-bottom: 0.5rem;\n}\n\n.search-tips code {\n  background-color: var(--accent-color);\n  color: #fff;\n  padding: 0.2rem 0.4rem;\n  border-radius: 3px;\n  font-size: 0.8rem;\n}\n\n/* Анимации */\n.search-result-item {\n  animation: searchResultSlideIn 0.3s ease-out;\n}\n\n@keyframes searchResultSlideIn {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n/* ... в конец файла src/style.css ... */\n\n.button-group {\n  display: flex;\n  gap: 0.5rem;\n  flex-wrap: wrap;\n}\n\n.filename {\n  font-size: 0.8rem;\n  color: #888;\n  margin-top: 0.25rem;\n  word-break: break-all;\n}\n\n/* Адаптивность */\n@media (max-width: 768px) {\n  .search-container {\n    padding: 0.5rem;\n  }\n\n  #search-input {\n    font-size: 1rem;\n    padding: 0.75rem;\n  }\n\n  .tag-suggestions,\n  .example-queries {\n    justify-content: center;\n  }\n\n  .search-result-header {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 0.25rem;\n  }\n}\n\n@media (max-width: 480px) {\n  .search-day-results {\n    gap: 0.75rem;\n  }\n\n  .search-result-item {\n    padding: 1rem;\n  }\n}\n\n/* === СТИЛИ ДЛЯ КНОПОК СКАЧИВАНИЯ === */\n\n/* === СТИЛИ ДЛЯ ЭКСПОРТА === */\n\n.export-button {\n  background: linear-gradient(135deg, #28a745, #20c997);\n  color: #fff;\n  border: none;\n  padding: 0.75rem 1.25rem;\n  border-radius: 8px;\n  cursor: pointer;\n  font-size: 0.9rem;\n  font-weight: 600;\n  transition: all 0.3s ease;\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n  box-shadow: 0 2px 8px rgba(40, 167, 69, 0.2);\n}\n\n.export-button:hover {\n  background: linear-gradient(135deg, #218838, #1ea085);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);\n}\n\n.export-button:disabled {\n  background: #6c757d;\n  cursor: not-allowed;\n  transform: none;\n  box-shadow: none;\n  animation: exportPulse 1.5s infinite;\n}\n\n.export-button.compact {\n  padding: 0.5rem 0.75rem;\n  font-size: 0.8rem;\n  border-radius: 6px;\n}\n\n@keyframes exportPulse {\n  0%,\n  100% {\n    opacity: 0.7;\n  }\n  50% {\n    opacity: 1;\n  }\n}\n.download-button {\n  background: linear-gradient(135deg, #007bff, #0056b3);\n  color: #fff;\n  border: none;\n  padding: 0.75rem 1.25rem;\n  border-radius: 8px;\n  cursor: pointer;\n  font-size: 0.9rem;\n  font-weight: 600;\n  transition: all 0.3s ease;\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n  box-shadow: 0 2px 8px rgba(0, 123, 255, 0.2);\n}\n\n.download-button:hover {\n  background: linear-gradient(135deg, #0056b3, #004085);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 15px rgba(0, 123, 255, 0.3);\n}\n\n.download-button:disabled {\n  background: #6c757d;\n  cursor: not-allowed;\n  transform: none;\n  box-shadow: none;\n  animation: downloadPulse 1.5s infinite;\n}\n\n.download-button.compact {\n  padding: 0.5rem 0.75rem;\n  font-size: 0.8rem;\n  border-radius: 6px;\n}\n\n/* Группы кнопок экспорта/скачивания */\n.export-buttons-group {\n  display: flex;\n  gap: 0.75rem;\n  align-items: center;\n  flex-wrap: wrap;\n}\n\n/* Обновляем контейнеры для групп кнопок */\n.week-controls,\n.month-controls,\n.year-controls {\n  background-color: var(--primary-color);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  padding: 1rem;\n  margin-bottom: 1.5rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.notes-header {\n  gap: 1rem;\n}\n\n.notes-header h4 {\n  flex: 1;\n}\n\n/* Уведомления об экспорте */\n.export-notification {\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  background-color: var(--primary-color);\n  border: 2px solid var(--border-color);\n  border-radius: 12px;\n  padding: 1rem;\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);\n  z-index: 1000;\n  max-width: 350px;\n  transform: translateX(400px);\n  opacity: 0;\n  transition: all 0.3s ease;\n  cursor: pointer;\n}\n\n.export-notification.show {\n  transform: translateX(0);\n  opacity: 1;\n}\n\n.export-notification.success {\n  border-color: #28a745;\n  background: linear-gradient(135deg, #d4edda, #c3e6cb);\n  color: #155724;\n}\n\n.export-notification.error {\n  border-color: #dc3545;\n  background: linear-gradient(135deg, #f8d7da, #f5c6cb);\n  color: #721c24;\n}\n\n.notification-content {\n  display: flex;\n  align-items: flex-start;\n  gap: 0.75rem;\n}\n\n.notification-icon {\n  font-size: 1.5rem;\n  line-height: 1;\n  flex-shrink: 0;\n}\n\n.notification-text strong {\n  display: block;\n  margin-bottom: 0.25rem;\n  font-size: 0.95rem;\n}\n\n.notification-text p {\n  margin: 0;\n  font-size: 0.85rem;\n  line-height: 1.3;\n}\n/* Дополнительные стили для уведомлений */\n.notification-text .filename {\n  margin-top: 0.5rem;\n  font-size: 0.8rem;\n  color: #666;\n  font-family: monospace;\n  background-color: rgba(255, 255, 255, 0.1);\n  padding: 0.25rem 0.5rem;\n  border-radius: 4px;\n  word-break: break-all;\n}\n\n/* Адаптивность для уведомлений */\n@media (max-width: 768px) {\n  .export-notification {\n    top: 10px;\n    right: 10px;\n    left: 10px;\n    max-width: none;\n    transform: translateY(-100px);\n  }\n\n  .export-notification.show {\n    transform: translateY(0);\n  }\n}\n\n/* Анимация для кнопок скачивания во время процесса */\n@keyframes downloadPulse {\n  0%,\n  100% {\n    opacity: 0.7;\n  }\n  50% {\n    opacity: 1;\n  }\n}\n\n/* Адаптивность для мобильных устройств */\n@media (max-width: 768px) {\n  .export-buttons-group {\n    flex-direction: column;\n    gap: 0.5rem;\n    width: 100%;\n  }\n\n  .export-button,\n  .download-button {\n    width: 100%;\n    justify-content: center;\n    padding: 0.6rem 1rem;\n    font-size: 0.85rem;\n  }\n\n  .notes-header {\n    flex-direction: column;\n    gap: 0.75rem;\n    align-items: stretch;\n  }\n\n  .notes-header h4 {\n    text-align: center;\n  }\n\n  .notes-header .export-buttons-group {\n    justify-content: center;\n  }\n\n  .week-controls,\n  .month-controls,\n  .year-controls {\n    padding: 0.75rem;\n  }\n}\n\n@media (max-width: 480px) {\n  .export-button.compact,\n  .download-button.compact {\n    padding: 0.4rem 0.6rem;\n    font-size: 0.75rem;\n  }\n\n  .export-buttons-group {\n    gap: 0.4rem;\n  }\n}\n\n/* Улучшенная типографика для кнопок */\n.export-button,\n.download-button {\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,\n    Arial, sans-serif;\n  text-decoration: none;\n  white-space: nowrap;\n  user-select: none;\n}\n\n/* Фокус для accessibility */\n.export-button:focus,\n.download-button:focus {\n  outline: 2px solid rgba(0, 123, 255, 0.5);\n  outline-offset: 2px;\n}\n\n.download-button:focus {\n  outline-color: rgba(0, 123, 255, 0.6);\n}\n\n/* === PWA СТИЛИ === */\n\n.install-pwa-button {\n  background: linear-gradient(135deg, #ff6b35, #f7931e);\n  color: #fff;\n  border: none;\n  padding: 0.5rem 1rem;\n  border-radius: 5px;\n  cursor: pointer;\n  font-weight: bold;\n  font-size: 0.9rem;\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n  transition: all 0.3s ease;\n  box-shadow: 0 2px 8px rgba(255, 107, 53, 0.2);\n}\n\n.install-pwa-button:hover {\n  background: linear-gradient(135deg, #e55a2b, #e8831a);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 15px rgba(255, 107, 53, 0.3);\n}\n\n.update-notification {\n  background: linear-gradient(135deg, #17a2b8, #138496);\n  border-color: #17a2b8;\n  color: #fff;\n}\n\n.update-button {\n  background-color: rgba(255, 255, 255, 0.2);\n  color: #fff;\n  border: 1px solid rgba(255, 255, 255, 0.3);\n  padding: 0.5rem 1rem;\n  border-radius: 4px;\n  cursor: pointer;\n  margin-top: 0.5rem;\n  transition: all 0.2s ease;\n}\n\n.update-button:hover {\n  background-color: rgba(255, 255, 255, 0.3);\n  border-color: rgba(255, 255, 255, 0.5);\n}\n\n/* Адаптация для установленного PWA */\n@media all and (display-mode: standalone) {\n  body {\n    /* Добавляем отступ сверху для статус-бара на iOS */\n    padding-top: env(safe-area-inset-top);\n    padding-bottom: env(safe-area-inset-bottom);\n  }\n\n  #main-nav {\n    /* Скрываем кнопку установки в standalone режиме */\n  }\n\n  .install-pwa-button {\n    display: none !important;\n  }\n}\n\n/* Стили для iPad */\n@media screen and (max-width: 1024px) and (orientation: landscape) {\n  .install-pwa-button {\n    font-size: 0.8rem;\n    padding: 0.4rem 0.8rem;\n  }\n}\n\n/* iOS Safari специфичные стили */\n@supports (-webkit-appearance: none) {\n  .install-pwa-button {\n    -webkit-appearance: none;\n    -webkit-tap-highlight-color: transparent;\n  }\n}\n',""]);const i=c},239:(n,e,t)=>{var r=t(72),o=t.n(r),a=t(825),c=t.n(a),i=t(659),s=t.n(i),l=t(56),u=t.n(l),d=t(540),p=t.n(d),f=t(113),h=t.n(f),m=t(208),g={};g.styleTagTransform=h(),g.setAttributes=u(),g.insert=s().bind(null,"head"),g.domAPI=c(),g.insertStyleElement=p(),o()(m.A,g),m.A&&m.A.locals&&m.A.locals;var v=t(143);function y(n){var e=new Date(n),t=e.getDay(),r=e.getDate()-t+(0===t?-6:1),o=new Date(e.setDate(r));return o.setHours(0,0,0,0),o}function b(n){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},b(n)}function w(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,o,a,c,i=[],s=!0,l=!1;try{if(a=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=a.call(t)).done)&&(i.push(r.value),i.length!==e);s=!0);}catch(n){l=!0,o=n}finally{try{if(!s&&null!=t.return&&(c=t.return(),Object(c)!==c))return}finally{if(l)throw o}}return i}}(n,e)||function(n,e){if(n){if("string"==typeof n)return x(n,e);var t={}.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?x(n,e):void 0}}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function k(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function D(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?k(Object(t),!0).forEach(function(e){S(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}function S(n,e,t){return(e=M(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function E(){var n,e,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var s=r&&r.prototype instanceof i?r:i,l=Object.create(s.prototype);return L(l,"_invoke",function(t,r,o){var a,i,s,l=0,u=o||[],d=!1,p={p:0,n:0,v:n,a:f,f:f.bind(n,4),d:function(e,t){return a=e,i=0,s=n,p.n=t,c}};function f(t,r){for(i=t,s=r,e=0;!d&&l&&!o&&e<u.length;e++){var o,a=u[e],f=p.p,h=a[2];t>3?(o=h===r)&&(s=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=n):a[0]<=f&&((o=t<2&&f<a[1])?(i=0,p.v=r,p.n=a[1]):f<h&&(o=t<3||a[0]>r||r>h)&&(a[4]=t,a[5]=r,p.n=h,i=0))}if(o||t>1)return c;throw d=!0,r}return function(o,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),i=u,s=h;(e=i<2?n:s)||!d;){a||(i?i<3?(i>1&&(p.n=-1),f(i,s)):p.n=s:p.v=s);try{if(l=2,a){if(i||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,i<2&&(i=0)}else 1===i&&(e=a.return)&&e.call(a),i<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=n}else if((e=(d=p.n<0)?s:t.call(r,p))!==c)break}catch(e){a=n,i=1,s=e}finally{l=1}}return{value:e,done:d}}}(t,o,a),!0),l}var c={};function i(){}function s(){}function l(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(L(e={},r,function(){return this}),e),d=l.prototype=i.prototype=Object.create(u);function p(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,l):(n.__proto__=l,L(n,o,"GeneratorFunction")),n.prototype=Object.create(d),n}return s.prototype=l,L(d,"constructor",l),L(l,"constructor",s),s.displayName="GeneratorFunction",L(l,o,"GeneratorFunction"),L(d),L(d,o,"Generator"),L(d,r,function(){return this}),L(d,"toString",function(){return"[object Generator]"}),(E=function(){return{w:a,m:p}})()}function L(n,e,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(n){o=0}L=function(n,e,t,r){function a(e,t){L(n,e,function(n){return this._invoke(e,t,n)})}e?o?o(n,e,{value:t,enumerable:!r,configurable:!r,writable:!r}):n[e]=t:(a("next",0),a("throw",1),a("return",2))},L(n,e,t,r)}function N(n,e,t,r,o,a,c){try{var i=n[a](c),s=i.value}catch(n){return void t(n)}i.done?e(s):Promise.resolve(s).then(r,o)}function T(n){return function(){var e=this,t=arguments;return new Promise(function(r,o){var a=n.apply(e,t);function c(n){N(a,r,o,c,i,"next",n)}function i(n){N(a,r,o,c,i,"throw",n)}c(void 0)})}}function j(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,M(r.key),r)}}function M(n){var e=function(n){if("object"!=b(n)||!n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var t=e.call(n,"string");if("object"!=b(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==b(e)?e:e+""}function C(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(C=function(){return!!n})()}function O(n){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},O(n)}function W(n,e){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,e){return n.__proto__=e,n},W(n,e)}var A="today",B="yesterday",R="thisWeek",Y="thisMonth",I="thisYear";function P(n){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate());switch(n){case A:return{start:new Date(t),end:new Date(t.getTime()+864e5)};case B:var r=new Date(t);return r.setDate(t.getDate()-1),{start:r,end:new Date(t)};case R:var o=y(e),a=new Date(o);return a.setDate(o.getDate()+7),{start:o,end:a};case"lastWeek":var c=y(e);c.setDate(c.getDate()-7);var i=new Date(c);return i.setDate(c.getDate()+7),{start:c,end:i};case Y:return{start:new Date(e.getFullYear(),e.getMonth(),1),end:new Date(e.getFullYear(),e.getMonth()+1,1)};case"lastMonth":return{start:new Date(e.getFullYear(),e.getMonth()-1,1),end:new Date(e.getFullYear(),e.getMonth(),1)};case I:return{start:new Date(e.getFullYear(),0,1),end:new Date(e.getFullYear()+1,0,1)};case"last7Days":var s=new Date(e);return s.setDate(e.getDate()-7),{start:s,end:e};case"last30Days":var l=new Date(e);return l.setDate(e.getDate()-30),{start:l,end:e};default:throw new Error("Неизвестный тип диапазона: ".concat(n))}}var z=function(n){function e(){var n;return function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(n,e,t){return e=O(e),function(n,e){if(e&&("object"==b(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,C()?Reflect.construct(e,t||[],O(n).constructor):e.apply(n,t))}(this,e,["TimeArchive"])).version(1).stores({notes:"++id, date, content, tags"}),n.notes=n.table("notes"),n}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&W(n,e)}(e,n),t=e,r=[{key:"addNote",value:($=T(E().m(function n(e){var t,r,o,a,c=arguments;return E().w(function(n){for(;;)switch(n.p=n.n){case 0:return t=c.length>1&&void 0!==c[1]?c[1]:[],n.p=1,r={content:e.trim(),tags:Array.isArray(t)?t:[],date:new Date},n.n=2,this.notes.add(r);case 2:return o=n.v,console.log("Запись добавлена с ID: ".concat(o)),n.a(2,o);case 3:throw n.p=3,a=n.v,console.error("Ошибка при добавлении записи:",a),a;case 4:return n.a(2)}},n,this,[[1,3]])})),function(n){return $.apply(this,arguments)})},{key:"deleteNote",value:(G=T(E().m(function n(e){var t;return E().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,this.notes.delete(e);case 1:console.log("Запись с ID: ".concat(e," удалена")),n.n=3;break;case 2:throw n.p=2,t=n.v,console.error("Ошибка при удалении записи с ID ".concat(e,":"),t),t;case 3:return n.a(2)}},n,this,[[0,2]])})),function(n){return G.apply(this,arguments)})},{key:"getNotesByDateRange",value:(U=T(E().m(function n(e,t){var r,o,a,c=arguments;return E().w(function(n){for(;;)switch(n.p=n.n){case 0:return r=!(c.length>2&&void 0!==c[2])||c[2],o=c.length>3&&void 0!==c[3]&&c[3],n.p=1,n.n=2,this.notes.where("date").between(e,t,r,o).reverse().toArray();case 2:return n.a(2,n.v);case 3:throw n.p=3,a=n.v,console.error("Ошибка получения записей по диапазону:",a),a;case 4:return n.a(2)}},n,this,[[1,3]])})),function(n,e){return U.apply(this,arguments)})},{key:"getTodayNotes",value:(q=T(E().m(function n(){var e,t,r;return E().w(function(n){for(;;)switch(n.n){case 0:return e=P(A),t=e.start,r=e.end,n.n=1,this.getNotesByDateRange(t,r,!0,!1);case 1:return n.a(2,n.v)}},n,this)})),function(){return q.apply(this,arguments)})},{key:"getYesterdayNotes",value:(_=T(E().m(function n(){var e,t,r;return E().w(function(n){for(;;)switch(n.n){case 0:return e=P(B),t=e.start,r=e.end,n.n=1,this.getNotesByDateRange(t,r,!0,!1);case 1:return n.a(2,n.v)}},n,this)})),function(){return _.apply(this,arguments)})},{key:"searchNotes",value:(V=T(E().m(function n(e){var t,r,o,a,c,i,s,l,u,d,p,f,h,m,g,v,y,b,w,x,k=arguments;return E().w(function(n){for(;;)switch(n.n){case 0:if(t=k.length>1&&void 0!==k[1]?k[1]:{},e&&0!==e.trim().length){n.n=1;break}return n.a(2,[]);case 1:return r=t.caseSensitive,o=void 0!==r&&r,a=t.searchInContent,c=void 0===a||a,i=t.searchInTags,s=void 0===i||i,l=t.exactMatch,u=void 0!==l&&l,d=t.limit,p=void 0===d?100:d,f=t.dateFrom,h=void 0===f?null:f,m=t.dateTo,g=void 0===m?null:m,v=o?e.trim():e.trim().toLowerCase(),y=this.notes.toCollection(),(h||g)&&(b=h||new Date("1970-01-01"),w=g||new Date("2099-12-31"),y=this.notes.where("date").between(b,w,!0,!0)),n.n=2,y.filter(function(n){var e=!1,t=!1;if(c){var r=o?n.content:n.content.toLowerCase();e=u?r===v:r.includes(v)}return s&&n.tags.length>0&&(t=n.tags.some(function(n){var e=o?n:n.toLowerCase();return u?e===v:e.includes(v)})),e||t}).reverse().limit(p).toArray();case 2:return x=n.v,n.a(2,x)}},n,this)})),function(n){return V.apply(this,arguments)})},{key:"searchByTags",value:(F=T(E().m(function n(e){var t,r,o=arguments;return E().w(function(n){for(;;)switch(n.n){case 0:if(t=o.length>1&&void 0!==o[1]&&o[1],Array.isArray(e)&&0!==e.length){n.n=1;break}return n.a(2,[]);case 1:return r=e.map(function(n){return n.startsWith("#")?n.toLowerCase():"#".concat(n.toLowerCase())}),n.n=2,this.notes.filter(function(n){if(!n.tags||0===n.tags.length)return!1;var e=n.tags.map(function(n){return n.toLowerCase()});return t?r.every(function(n){return e.includes(n)}):r.some(function(n){return e.includes(n)})}).reverse().toArray();case 2:return n.a(2,n.v)}},n,this)})),function(n){return F.apply(this,arguments)})},{key:"searchNotesStartsWith",value:(H=T(E().m(function n(e){var t,r,o=arguments;return E().w(function(n){for(;;)switch(n.n){case 0:if(t=o.length>1&&void 0!==o[1]?o[1]:"content",e&&0!==e.trim().length){n.n=1;break}return n.a(2,[]);case 1:return r=e.trim().toLowerCase(),n.n=2,this.notes.filter(function(n){return"content"===t?n.content.toLowerCase().startsWith(r):"tags"===t&&n.tags.some(function(n){return n.toLowerCase().startsWith(r)})}).reverse().toArray();case 2:return n.a(2,n.v)}},n,this)})),function(n){return H.apply(this,arguments)})},{key:"fullTextSearch",value:(z=T(E().m(function n(e){var t,r,o,a,c,i,s,l,u,d,p,f=this,h=arguments;return E().w(function(n){for(;;)switch(n.n){case 0:if(r=(t=h.length>1&&void 0!==h[1]?h[1]:{}).highlightMatches,o=void 0!==r&&r,a=t.minWordLength,c=void 0===a?2:a,i=t.stopWords,s=void 0===i?["и","в","на","с","по","для","от","к","до","из"]:i,l=t.limit,u=void 0===l?50:l,e&&!(e.trim().length<c)){n.n=1;break}return n.a(2,[]);case 1:if(0!==(d=e.trim().toLowerCase().split(/\s+/).filter(function(n){return n.length>=c&&!s.includes(n)})).length){n.n=2;break}return n.a(2,[]);case 2:return n.n=3,this.notes.filter(function(n){var e=n.content.toLowerCase(),t=n.tags.join(" ").toLowerCase(),r="".concat(e," ").concat(t);return d.every(function(n){return r.includes(n)})}).reverse().limit(u).toArray();case 3:if(p=n.v,!o){n.n=4;break}return n.a(2,p.map(function(n){return D(D({},n),{},{highlightedContent:f.highlightMatches(n.content,d),highlightedTags:n.tags.map(function(n){return f.highlightMatches(n,d)})})}));case 4:return n.a(2,p)}},n,this)})),function(n){return z.apply(this,arguments)})},{key:"highlightMatches",value:function(n,e){var t=n;return e.forEach(function(n){var e=new RegExp("(".concat(n,")"),"gi");t=t.replace(e,"<mark>$1</mark>")}),t}},{key:"advancedSearch",value:(M=T(E().m(function n(e){var t,r,o,a,c,i,s,l,u,d,p,f,h,m,g,v,y,b,w,x,k,D,S=this;return E().w(function(n){for(;;)switch(n.n){case 0:return t=e.text,r=void 0===t?"":t,o=e.tags,a=void 0===o?[]:o,c=e.dateFrom,i=void 0===c?null:c,s=e.dateTo,l=void 0===s?null:s,e.hasAttachments,u=e.minLength,d=void 0===u?null:u,p=e.maxLength,f=void 0===p?null:p,h=e.sortBy,m=void 0===h?"date":h,g=e.sortOrder,v=void 0===g?"desc":g,y=e.limit,b=void 0===y?100:y,w=this.notes.toCollection(),(i||l)&&(x=i||new Date("1970-01-01"),k=l||new Date("2099-12-31"),w=this.notes.where("date").between(x,k,!0,!0)),n.n=1,w.filter(function(n){return!(r&&!n.content.toLowerCase().includes(r.toLowerCase())||a.length>0&&!a.some(function(e){return n.tags.some(function(n){return n.toLowerCase().includes(e.toLowerCase())})})||null!==d&&n.content.length<d||null!==f&&n.content.length>f)}).toArray();case 1:return D=n.v,"date"===m?D.sort(function(n,e){var t=new Date(n.date),r=new Date(e.date);return"desc"===v?r-t:t-r}):"relevance"===m&&r&&D.sort(function(n,e){var t=S.calculateRelevance(n,r),o=S.calculateRelevance(e,r);return"desc"===v?o-t:t-o}),n.a(2,D.slice(0,b))}},n,this)})),function(n){return M.apply(this,arguments)})},{key:"calculateRelevance",value:function(n,e){var t=n.content.toLowerCase(),r=e.toLowerCase(),o=0;return t.includes(r)&&(o+=10),t.startsWith(r)&&(o+=5),n.tags.some(function(n){return n.toLowerCase().includes(r)})&&(o+=8),o}},{key:"getPopularTags",value:(N=T(E().m(function n(){var e,t,r,o=arguments;return E().w(function(n){for(;;)switch(n.n){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:20,n.n=1,this.notes.toArray();case 1:return t=n.v,r={},t.forEach(function(n){n.tags.forEach(function(n){r[n]=(r[n]||0)+1})}),n.a(2,Object.entries(r).sort(function(n,e){var t=w(n,2)[1];return w(e,2)[1]-t}).slice(0,e).map(function(n){var e=w(n,2);return{tag:e[0],count:e[1]}}))}},n,this)})),function(){return N.apply(this,arguments)})},{key:"getTagSuggestions",value:(L=T(E().m(function n(e){var t,r,o,a=arguments;return E().w(function(n){for(;;)switch(n.n){case 0:if(t=a.length>1&&void 0!==a[1]?a[1]:10,e&&!(e.length<1)){n.n=2;break}return n.n=1,this.getPopularTags(t);case 1:return n.a(2,n.v);case 2:return n.n=3,this.notes.toArray();case 3:return r=n.v,o=new Set,r.forEach(function(n){n.tags.forEach(function(n){n.toLowerCase().startsWith(e.toLowerCase())&&o.add(n)})}),n.a(2,Array.from(o).slice(0,t))}},n,this)})),function(n){return L.apply(this,arguments)})},{key:"saveSearchHistory",value:(S=T(E().m(function n(e,t){var r;return E().w(function(n){for(;;)switch(n.n){case 0:r={query:e,resultsCount:t,timestamp:new Date},console.log("Поиск сохранён в историю:",r);case 1:return n.a(2)}},n)})),function(n,e){return S.apply(this,arguments)})},{key:"getAllNotes",value:(k=T(E().m(function n(){return E().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,this.notes.reverse().toArray();case 1:return n.a(2,n.v)}},n,this)})),function(){return k.apply(this,arguments)})},{key:"getThisWeekNotes",value:(x=T(E().m(function n(){var e,t,r;return E().w(function(n){for(;;)switch(n.n){case 0:return e=P(R),t=e.start,r=e.end,n.n=1,this.getNotesByDateRange(t,r,!0,!1);case 1:return n.a(2,n.v)}},n,this)})),function(){return x.apply(this,arguments)})},{key:"getWeekNotes",value:(v=T(E().m(function n(e){var t,r;return E().w(function(n){for(;;)switch(n.n){case 0:return t=e||y(new Date),(r=new Date(t)).setDate(t.getDate()+7),n.n=1,this.getNotesByDateRange(t,r,!0,!1);case 1:return n.a(2,n.v)}},n,this)})),function(n){return v.apply(this,arguments)})},{key:"getThisMonthNotes",value:(g=T(E().m(function n(){var e,t,r;return E().w(function(n){for(;;)switch(n.n){case 0:return e=P(Y),t=e.start,r=e.end,n.n=1,this.getNotesByDateRange(t,r,!0,!1);case 1:return n.a(2,n.v)}},n,this)})),function(){return g.apply(this,arguments)})},{key:"getMonthNotes",value:(m=T(E().m(function n(e,t){var r,o;return E().w(function(n){for(;;)switch(n.n){case 0:return r=new Date(e,t,1),o=new Date(e,t+1,1),n.n=1,this.getNotesByDateRange(r,o,!0,!1);case 1:return n.a(2,n.v)}},n,this)})),function(n,e){return m.apply(this,arguments)})},{key:"getThisYearNotes",value:(h=T(E().m(function n(){var e,t,r;return E().w(function(n){for(;;)switch(n.n){case 0:return e=P(I),t=e.start,r=e.end,n.n=1,this.getNotesByDateRange(t,r,!0,!1);case 1:return n.a(2,n.v)}},n,this)})),function(){return h.apply(this,arguments)})},{key:"getYearNotes",value:(f=T(E().m(function n(){var e,t,r,o=arguments;return E().w(function(n){for(;;)switch(n.n){case 0:return e=(o.length>0&&void 0!==o[0]?o[0]:null)||(new Date).getFullYear(),t=new Date(e,0,1),r=new Date(e+1,0,1),n.n=1,this.getNotesByDateRange(t,r,!0,!1);case 1:return n.a(2,n.v)}},n,this)})),function(){return f.apply(this,arguments)})},{key:"getLastNDaysNotes",value:(p=T(E().m(function n(e){var t,r;return E().w(function(n){for(;;)switch(n.n){case 0:return t=new Date,(r=new Date).setDate(t.getDate()-e),n.n=1,this.getNotesByDateRange(r,t,!0,!0);case 1:return n.a(2,n.v)}},n,this)})),function(n){return p.apply(this,arguments)})},{key:"getLastNWeeksNotes",value:(d=T(E().m(function n(e){var t,r;return E().w(function(n){for(;;)switch(n.n){case 0:return t=new Date,(r=new Date).setDate(t.getDate()-7*e),n.n=1,this.getNotesByDateRange(r,t,!0,!0);case 1:return n.a(2,n.v)}},n,this)})),function(n){return d.apply(this,arguments)})},{key:"getLastNMonthsNotes",value:(u=T(E().m(function n(e){var t,r;return E().w(function(n){for(;;)switch(n.n){case 0:return t=new Date,(r=new Date).setMonth(t.getMonth()-e),n.n=1,this.getNotesByDateRange(r,t,!0,!0);case 1:return n.a(2,n.v)}},n,this)})),function(n){return u.apply(this,arguments)})},{key:"getNotesFromDate",value:(l=T(E().m(function n(e){return E().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,this.notes.where("date").aboveOrEqual(e).reverse().toArray();case 1:return n.a(2,n.v)}},n,this)})),function(n){return l.apply(this,arguments)})},{key:"getNotesBeforeDate",value:(s=T(E().m(function n(e){return E().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,this.notes.where("date").below(e).reverse().toArray();case 1:return n.a(2,n.v)}},n,this)})),function(n){return s.apply(this,arguments)})},{key:"getNotesStats",value:(i=T(E().m(function n(){var e,t,r,o,a=arguments;return E().w(function(n){for(;;)switch(n.n){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:null,n.n=1,this.getYearNotes(e);case 1:for(t=n.v,r={},o=0;o<12;o++)r[o]=0;return t.forEach(function(n){var e=n.date.getMonth();r[e]++}),n.a(2,{totalNotes:t.length,monthlyStats:r,allNotes:t})}},n,this)})),function(){return i.apply(this,arguments)})},{key:"getDailyStats",value:(c=T(E().m(function n(e,t){var r,o;return E().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,this.getNotesByDateRange(e,t,!0,!0);case 1:return r=n.v,o={},r.forEach(function(n){var e=n.date.toISOString().split("T")[0];o[e]||(o[e]={date:e,count:0,notes:[]}),o[e].count++,o[e].notes.push(n)}),n.a(2,Object.values(o).sort(function(n,e){return new Date(e.date)-new Date(n.date)}))}},n,this)})),function(n,e){return c.apply(this,arguments)})},{key:"getTagStatsForPeriod",value:(a=T(E().m(function n(e,t){var r,o;return E().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,this.getNotesByDateRange(e,t,!0,!0);case 1:return r=n.v,o={},r.forEach(function(n){n.tags.forEach(function(e){o[e]||(o[e]={tag:e,count:0,notes:[]}),o[e].count++,o[e].notes.push(n)})}),n.a(2,Object.values(o).sort(function(n,e){return e.count-n.count}))}},n,this)})),function(n,e){return a.apply(this,arguments)})},{key:"getNotesPaginated",value:(o=T(E().m(function n(){var e,t,r,o,a,c=arguments;return E().w(function(n){for(;;)switch(n.n){case 0:return e=c.length>0&&void 0!==c[0]?c[0]:0,t=c.length>1&&void 0!==c[1]?c[1]:20,r=c.length>2&&void 0!==c[2]?c[2]:null,o=c.length>3&&void 0!==c[3]?c[3]:null,a=this.notes.orderBy("date").reverse(),r&&o&&(a=this.notes.where("date").between(r,o,!0,!1).reverse()),n.n=1,a.offset(e).limit(t).toArray();case 1:return n.a(2,n.v)}},n,this)})),function(){return o.apply(this,arguments)})},{key:"formatDateRange",value:function(n,e){var t=n.toLocaleDateString("ru-RU"),r=e.toLocaleDateString("ru-RU");return t===r?t:"".concat(t," - ").concat(r)}}],r&&j(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,o,a,c,i,s,l,u,d,p,f,h,m,g,v,x,k,S,L,N,M,z,H,F,V,_,q,U,G,$}(v.Ay),H=new z;function F(n){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},F(n)}function V(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var r,o,a,c,i=[],s=!0,l=!1;try{if(a=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=a.call(t)).done)&&(i.push(r.value),i.length!==e);s=!0);}catch(n){l=!0,o=n}finally{try{if(!s&&null!=t.return&&(c=t.return(),Object(c)!==c))return}finally{if(l)throw o}}return i}}(n,e)||_(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(n,e){if(n){if("string"==typeof n)return q(n,e);var t={}.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?q(n,e):void 0}}function q(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function U(){var n,e,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var s=r&&r.prototype instanceof i?r:i,l=Object.create(s.prototype);return G(l,"_invoke",function(t,r,o){var a,i,s,l=0,u=o||[],d=!1,p={p:0,n:0,v:n,a:f,f:f.bind(n,4),d:function(e,t){return a=e,i=0,s=n,p.n=t,c}};function f(t,r){for(i=t,s=r,e=0;!d&&l&&!o&&e<u.length;e++){var o,a=u[e],f=p.p,h=a[2];t>3?(o=h===r)&&(s=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=n):a[0]<=f&&((o=t<2&&f<a[1])?(i=0,p.v=r,p.n=a[1]):f<h&&(o=t<3||a[0]>r||r>h)&&(a[4]=t,a[5]=r,p.n=h,i=0))}if(o||t>1)return c;throw d=!0,r}return function(o,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),i=u,s=h;(e=i<2?n:s)||!d;){a||(i?i<3?(i>1&&(p.n=-1),f(i,s)):p.n=s:p.v=s);try{if(l=2,a){if(i||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,i<2&&(i=0)}else 1===i&&(e=a.return)&&e.call(a),i<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=n}else if((e=(d=p.n<0)?s:t.call(r,p))!==c)break}catch(e){a=n,i=1,s=e}finally{l=1}}return{value:e,done:d}}}(t,o,a),!0),l}var c={};function i(){}function s(){}function l(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(G(e={},r,function(){return this}),e),d=l.prototype=i.prototype=Object.create(u);function p(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,l):(n.__proto__=l,G(n,o,"GeneratorFunction")),n.prototype=Object.create(d),n}return s.prototype=l,G(d,"constructor",l),G(l,"constructor",s),s.displayName="GeneratorFunction",G(l,o,"GeneratorFunction"),G(d),G(d,o,"Generator"),G(d,r,function(){return this}),G(d,"toString",function(){return"[object Generator]"}),(U=function(){return{w:a,m:p}})()}function G(n,e,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(n){o=0}G=function(n,e,t,r){function a(e,t){G(n,e,function(n){return this._invoke(e,t,n)})}e?o?o(n,e,{value:t,enumerable:!r,configurable:!r,writable:!r}):n[e]=t:(a("next",0),a("throw",1),a("return",2))},G(n,e,t,r)}function $(n,e,t,r,o,a,c){try{var i=n[a](c),s=i.value}catch(n){return void t(n)}i.done?e(s):Promise.resolve(s).then(r,o)}function K(n){return function(){var e=this,t=arguments;return new Promise(function(r,o){var a=n.apply(e,t);function c(n){$(a,r,o,c,i,"next",n)}function i(n){$(a,r,o,c,i,"throw",n)}c(void 0)})}}function J(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,X(r.key),r)}}function X(n){var e=function(n){if("object"!=F(n)||!n)return n;var e=n[Symbol.toPrimitive];if(void 0!==e){var t=e.call(n,"string");if("object"!=F(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==F(e)?e:e+""}var Q,Z,nn=function(){return n=function n(){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.currentView="today",this.currentWeekStart=null,this.currentMonth=(new Date).getMonth(),this.currentYear=(new Date).getFullYear(),this.init()},e=[{key:"init",value:function(){console.log("Инициализация ViewManager..."),this.initNavigation(),this.initNavigationArrows(),this.setupEventListeners()}},{key:"initNavigation",value:function(){var n=this,e=document.querySelectorAll(".nav-button");0!==e.length?(console.log("Найдено ".concat(e.length," кнопок навигации")),e.forEach(function(e,t){var r=e.dataset.view;r?(e.addEventListener("click",function(e){e.preventDefault(),console.log("Переключение на вид: ".concat(r)),n.switchView(r)}),e.addEventListener("keydown",function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),n.switchView(r))})):console.warn("Кнопка ".concat(t," не имеет data-view атрибута"))})):console.error("Кнопки навигации не найдены!")}},{key:"switchView",value:(k=K(U().m(function n(e){var t;return U().w(function(n){for(;;)switch(n.p=n.n){case 0:if(console.log("Переключение на вид: ".concat(e)),n.p=1,this.hideAllViews(),this.deactivateAllNavButtons(),this.showView(e)){n.n=2;break}return console.error("Вид ".concat(e," не найден!")),n.a(2);case 2:return this.activateNavButton(e),this.currentView=e,n.n=3,this.loadViewData(e);case 3:console.log("Успешно переключились на вид: ".concat(e)),n.n=5;break;case 4:n.p=4,t=n.v,console.error("Ошибка при переключении на вид ".concat(e,":"),t);case 5:return n.a(2)}},n,this,[[1,4]])})),function(n){return k.apply(this,arguments)})},{key:"hideAllViews",value:function(){document.querySelectorAll("[data-view-content]").forEach(function(n){n.hidden=!0,n.style.display="none"})}},{key:"showView",value:function(n){var e=document.querySelector('[data-view-content="'.concat(n,'"]'));return!!e&&(e.hidden=!1,e.style.display="block",!0)}},{key:"deactivateAllNavButtons",value:function(){document.querySelectorAll(".nav-button").forEach(function(n){n.classList.remove("active"),n.setAttribute("aria-selected","false")})}},{key:"activateNavButton",value:function(n){var e=document.querySelector('[data-view="'.concat(n,'"]'));e&&(e.classList.add("active"),e.setAttribute("aria-selected","true"))}},{key:"loadViewData",value:(x=K(U().m(function n(e){var t,r;return U().w(function(n){for(;;)switch(n.p=n.n){case 0:console.log("Загрузка данных для вида: ".concat(e)),n.p=1,t=e,n.n="today"===t?2:"week"===t?4:"month"===t?6:"year"===t?8:"search"===t?10:11;break;case 2:return n.n=3,this.loadTodayView();case 3:return n.a(3,12);case 4:return n.n=5,this.loadWeekView();case 5:return n.a(3,12);case 6:return n.n=7,this.loadMonthView();case 7:return n.a(3,12);case 8:return n.n=9,this.loadYearView();case 9:return n.a(3,12);case 10:return this.setupSearch(),n.a(3,12);case 11:console.warn("Неизвестный вид: ".concat(e));case 12:n.n=14;break;case 13:n.p=13,r=n.v,console.error("Ошибка загрузки вида ".concat(e,":"),r),this.showError('Ошибка загрузки данных для вида "'.concat(e,'"'));case 14:return n.a(2)}},n,this,[[1,13]])})),function(n){return x.apply(this,arguments)})},{key:"loadTodayView",value:(w=K(U().m(function n(){var e,t,r,o;return U().w(function(n){for(;;)switch(n.p=n.n){case 0:return console.log('Загрузка вида "Сегодня"...'),n.p=1,n.n=2,H.getTodayNotes();case 2:if(e=n.v,console.log("Найдено записей за сегодня: ".concat(e.length)),t=e.slice(0,10),this.updateRecentNotesList(t),"function"!=typeof H.getYesterdayNotes){n.n=4;break}return n.n=3,H.getYesterdayNotes();case 3:(r=n.v).length>0&&this.showYesterdayNotes(r.slice(0,5));case 4:n.n=6;break;case 5:n.p=5,o=n.v,console.error('Ошибка загрузки вида "Сегодня":',o),this.showError("Не удалось загрузить записи за сегодня");case 6:return n.a(2)}},n,this,[[1,5]])})),function(){return w.apply(this,arguments)})},{key:"updateRecentNotesList",value:function(n){var e=this,t=document.getElementById("recent-notes-list");if(t)if(0!==n.length){var r=n.map(function(n){return e.createNoteHTML(n,200)}).join("");t.innerHTML='\n      <div class="notes-header">\n        <h4>Последние записи ('.concat(n.length,')</h4>\n        <div class="export-buttons-group">\n          <button class="export-button compact" id="export-today-btn" title="Скопировать записи за сегодня">\n            📋 Копировать\n          </button>\n          <button class="download-button compact" id="download-today-btn" title="Скачать записи за сегодня как .txt">\n            📥 Скачать\n          </button>\n        </div>\n      </div>\n      <div class="notes-list">\n        ').concat(r,"\n      </div>\n    "),console.log("Отображено ".concat(n.length," записей")),this.attachTodayHandlers()}else t.innerHTML='\n        <div class="empty-state">\n          <p>📝 Пока записей нет</p>\n          <p>Начни документировать свои страдания!</p>\n        </div>\n      ';else console.error("Контейнер recent-notes-list не найден!")}},{key:"attachTodayHandlers",value:function(){var n=this,e=document.getElementById("export-today-btn");e&&e.addEventListener("click",K(U().m(function t(){var r;return U().w(function(t){for(;;)switch(t.n){case 0:return e.disabled=!0,e.textContent="⏳",t.n=1,n.exportTodayNotes();case 1:r=t.v,n.showExportNotification(r,!1),e.disabled=!1,e.textContent="📋 Копировать";case 2:return t.a(2)}},t)})));var t=document.getElementById("download-today-btn");t&&t.addEventListener("click",K(U().m(function e(){var r;return U().w(function(e){for(;;)switch(e.n){case 0:return t.disabled=!0,t.textContent="⏳",e.n=1,n.downloadTodayNotes();case 1:r=e.v,n.showExportNotification(r,!0),t.disabled=!1,t.textContent="📥 Скачать";case 2:return e.a(2)}},e)})));var r=document.getElementById("recent-notes-list");r&&r.addEventListener("click",function(e){var t=e.target.closest("button[data-note-id]");if(t){var r=t.dataset.noteId;t.classList.contains("expand-note-btn")&&n.expandNoteContent(r),t.classList.contains("copy-btn")&&n.copyNoteToClipboard(parseInt(r,10)),t.classList.contains("edit-btn")&&n.editNote(parseInt(r,10)),t.classList.contains("delete-btn")&&n.deleteNote(parseInt(r,10))}})}},{key:"expandNoteContent",value:function(n){var e=document.querySelector('.note-item[data-note-id="'.concat(n,'"] .note-content')),t=null==e?void 0:e.querySelector(".content-text"),r=null==e?void 0:e.querySelector(".expand-note-btn");if(e&&t&&r){var o=e.dataset.fullContent;o&&(t.innerHTML=o,t.classList.remove("truncated"),r.remove(),console.log("Раскрыт полный текст записи #".concat(n)))}else console.error("Элементы для раскрытия не найдены:",n)}},{key:"copyNoteToClipboard",value:(b=K(U().m(function n(e){var t,r,o,a;return U().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,H.notes.get(e);case 1:if(t=n.v){n.n=2;break}return console.error("Запись не найдена:",e),n.a(2);case 2:return r=this.formatSingleNoteForCopy(t),n.n=3,this.copyToClipboard(r);case 3:o=n.v,this.showExportNotification({success:o.success,count:1,period:"запись #".concat(e),error:o.error},!1),n.n=5;break;case 4:n.p=4,a=n.v,console.error("Ошибка копирования записи:",a);case 5:return n.a(2)}},n,this,[[0,4]])})),function(n){return b.apply(this,arguments)})},{key:"formatSingleNoteForCopy",value:function(n){var e=new Date(n.date).toLocaleString("ru-RU"),t=n.tags.length>0?" ".concat(n.tags.join(" ")):"";return"📝 Запись #".concat(n.id," от ").concat(e,"\n\n").concat(n.content).concat(t)}},{key:"deleteNote",value:(y=K(U().m(function n(e){var t,r,o;return U().w(function(n){for(;;)switch(n.p=n.n){case 0:if(t="Точно удалить запись #".concat(e,"?\n\nЭто действие необратимо!"),confirm(t)){n.n=1;break}return n.a(2);case 1:return n.p=1,n.n=2,H.deleteNote(e);case 2:return n.n=3,this.updateCurrentView();case 3:console.log("Запись #".concat(e," удалена")),(r=document.createElement("div")).className="export-notification success",r.innerHTML='\n        <div class="notification-content">\n          <span class="notification-icon">🗑️</span>\n          <div class="notification-text">\n            <strong>Запись удалена</strong>\n            <p>Запись #'.concat(e," была успешно удалена.</p>\n          </div>\n        </div>\n      "),document.body.appendChild(r),setTimeout(function(){return r.classList.add("show")},10),setTimeout(function(){r.classList.remove("show"),setTimeout(function(){r.parentNode&&document.body.removeChild(r)},300)},3e3),n.n=5;break;case 4:n.p=4,o=n.v,console.error("Ошибка удаления записи:",o),alert("Не удалось удалить запись #".concat(e,": ").concat(o.message));case 5:return n.a(2)}},n,this,[[1,4]])})),function(n){return y.apply(this,arguments)})},{key:"editNote",value:(v=K(U().m(function n(e){return U().w(function(n){for(;;)switch(n.n){case 0:console.log("Редактирование записи:",e),alert("Редактирование записи #".concat(e,"\n\nФункция будет добавлена в следующих версиях."));case 1:return n.a(2)}},n)})),function(n){return v.apply(this,arguments)})},{key:"showYesterdayNotes",value:function(n){var e=this,t=document.getElementById("recent-notes-list");if(t&&0!==n.length){var r='\n      <div class="yesterday-notes">\n        <h4>Вчера ('.concat(n.length,')</h4>\n        <div class="notes-list">\n          ').concat(n.map(function(n){return e.createNoteHTML(n)}).join(""),"\n        </div>\n      </div>\n    ");t.insertAdjacentHTML("beforeend",r)}}},{key:"createNoteHTML",value:function(n){var e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,r=new Date(n.date),o=new Date;e=this.isSameDay(r,o)?r.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}):r.toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"});var a=n.tags.length>0?'<div class="note-tags">'.concat(n.tags.join(" "),"</div>"):"",c=t&&n.content.length>t,i=c?n.content.substring(0,t)+"...":n.content,s=c?'data-full-content="'.concat(this.escapeHtml(n.content),'"'):"",l=c?'<button class="expand-note-btn" data-note-id="'.concat(n.id,'" title="Показать полный текст">Показать полностью</button>'):"";return'\n      <div class="note-item" data-note-id="'.concat(n.id,'" title="Запись от ').concat(r.toLocaleString("ru-RU"),'">\n        <div class="note-header">\n          <span class="note-time">').concat(e,'</span>\n          <span class="note-id">#').concat(n.id,'</span>\n          <div class="note-actions">\n            <button class="note-action-btn copy-btn" data-note-id="').concat(n.id,'" title="Скопировать запись">📋</button>\n            <button class="note-action-btn edit-btn" data-note-id="').concat(n.id,'" title="Редактировать">✏️</button>\n            <button class="note-action-btn delete-btn" data-note-id="').concat(n.id,'" title="Удалить">🗑️</button>\n          </div>\n        </div>\n        <div class="note-content" ').concat(s,'>\n          <div class="content-text ').concat(c?"truncated":"",'" data-note-id="').concat(n.id,'">\n            ').concat(this.escapeHtml(i),"\n          </div>\n          ").concat(l,"\n        </div>\n        ").concat(a,"\n      </div>\n    ")}},{key:"loadWeekView",value:(g=K(U().m(function n(){var e,t;return U().w(function(n){for(;;)switch(n.p=n.n){case 0:return console.log("Загрузка недельного вида..."),n.p=1,this.currentWeekStart||(this.currentWeekStart=this.getWeekStart(new Date)),n.n=2,H.getWeekNotes(this.currentWeekStart);case 2:e=n.v,console.log("Найдено записей за неделю: ".concat(e.length)),this.updateWeekView(e),n.n=4;break;case 3:n.p=3,t=n.v,console.error("Ошибка загрузки недельного вида:",t),this.showError("Не удалось загрузить записи за неделю");case 4:return n.a(2)}},n,this,[[1,3]])})),function(){return g.apply(this,arguments)})},{key:"updateWeekView",value:function(n){var e=this,t=document.getElementById("week-notes-list"),r=document.getElementById("week-title");if(t&&r){var o=new Date(this.currentWeekStart);o.setDate(o.getDate()+6);var a=this.currentWeekStart.toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit"}),c=o.toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"});if(r.textContent="Неделя ".concat(a," — ").concat(c),0!==n.length){var i=this.groupNotesByDay(n),s=this.getWeekDaysArray(this.currentWeekStart).map(function(n){var t=n.date.toDateString(),r=i[t]||[];return'\n          <div class="week-day '.concat(r.length>0?"has-notes":"",'">\n            <div class="day-header">\n              <h4>').concat(n.name,'</h4>\n              <span class="day-date">').concat(n.date.toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit"}),"</span>\n              ").concat(r.length>0?'<span class="notes-count">'.concat(r.length,"</span>"):"",'\n            </div>\n            <div class="day-notes">\n              ').concat(r.length>0?r.map(function(n){return e.createCompactNoteHTML(n)}).join(""):'<p class="no-notes">Записей нет</p>',"\n            </div>\n          </div>\n        ")}).join("");t.innerHTML='\n    <div class="week-controls">\n      <div class="export-buttons-group">\n        <button class="export-button" id="export-week-btn" title="Скопировать все записи за неделю в буфер обмена">\n          📋 Скопировать записи ('.concat(n.length,')\n        </button>\n        <button class="download-button" id="download-week-btn" title="Скачать все записи за неделю как .txt файл">\n          📥 Скачать .txt (').concat(n.length,')\n        </button>\n      </div>\n    </div>\n    <div class="week-grid">\n      ').concat(s,'\n    </div>\n    <div class="week-summary">\n      <p>Всего записей за неделю: <strong>').concat(n.length,"</strong></p>\n      <p>Активных дней: <strong>").concat(Object.keys(i).length,"</strong></p>\n    </div>\n  ");var l=document.getElementById("export-week-btn");l&&l.addEventListener("click",K(U().m(function t(){var r;return U().w(function(t){for(;;)switch(t.n){case 0:return l.disabled=!0,l.textContent="⏳ Копирование...",t.n=1,e.exportWeekNotes();case 1:r=t.v,e.showExportNotification(r,!1),l.disabled=!1,l.textContent="📋 Скопировать записи (".concat(n.length,")");case 2:return t.a(2)}},t)})));var u=document.getElementById("download-week-btn");u&&u.addEventListener("click",K(U().m(function t(){var r;return U().w(function(t){for(;;)switch(t.n){case 0:return u.disabled=!0,u.textContent="⏳ Скачивание...",t.n=1,e.downloadWeekNotes();case 1:r=t.v,e.showExportNotification(r,!0),u.disabled=!1,u.textContent="📥 Скачать .txt (".concat(n.length,")");case 2:return t.a(2)}},t)})))}else t.innerHTML='\n        <div class="empty-state">\n          <p>📅 За эту неделю записей нет</p>\n          <p>Время начать документировать!</p>\n        </div>\n      '}else console.error("Контейнеры для недельного вида не найдены!")}},{key:"loadMonthView",value:(m=K(U().m(function n(){var e,t;return U().w(function(n){for(;;)switch(n.p=n.n){case 0:return console.log("Загрузка месячного вида..."),n.p=1,n.n=2,H.getMonthNotes(this.currentYear,this.currentMonth);case 2:e=n.v,console.log("Найдено записей за месяц: ".concat(e.length)),this.updateMonthView(e),n.n=4;break;case 3:n.p=3,t=n.v,console.error("Ошибка загрузки месячного вида:",t),this.showError("Не удалось загрузить записи за месяц");case 4:return n.a(2)}},n,this,[[1,3]])})),function(){return m.apply(this,arguments)})},{key:"updateMonthView",value:function(n){var e=this,t=document.getElementById("month-calendar-grid"),r=document.getElementById("month-title");if(t&&r){r.textContent="".concat(["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"][this.currentMonth]," ").concat(this.currentYear);var o=new Date(this.currentYear,this.currentMonth,1),a=new Date(this.currentYear,this.currentMonth+1,0).getDate(),c=0===o.getDay()?6:o.getDay()-1,i={};n.forEach(function(n){var e=n.date.getDate();i[e]||(i[e]=[]),i[e].push(n)});var s='\n    <div class="month-controls">\n      <div class="export-buttons-group">\n        <button class="export-button" id="export-month-btn" title="Скопировать все записи за месяц в буфер обмена">\n          📋 Экспорт месяца ('.concat(n.length,')\n        </button>\n        <button class="download-button" id="download-month-btn" title="Скачать все записи за месяц как .txt файл">\n          📥 Скачать .txt (').concat(n.length,")\n        </button>\n      </div>\n    </div>\n  ");t.parentElement.insertAdjacentHTML("afterbegin",s),t.innerHTML="",t.className="month-calendar-grid",["Пн","Вт","Ср","Чт","Пт","Сб","Вс"].forEach(function(n){var e=document.createElement("div");e.className="calendar-day-header",e.textContent=n,t.appendChild(e)});for(var l=0;l<c;l++){var u=document.createElement("div");u.className="calendar-day empty",t.appendChild(u)}for(var d=new Date,p=function(n){var r=document.createElement("div");r.className="calendar-day";var o=i[n]?i[n].length:0,a=e.currentYear===d.getFullYear()&&e.currentMonth===d.getMonth()&&n===d.getDate(),c="";o>0&&(r.classList.add("has-notes"),c=o>=5?"high-activity":o>=3?"medium-activity":"low-activity",r.classList.add(c)),a&&r.classList.add("today"),r.innerHTML='\n        <div class="day-number">'.concat(n,"</div>\n        ").concat(o>0?'<div class="notes-indicator">'.concat(o,"</div>"):"","\n      "),o>0&&(r.style.cursor="pointer",r.addEventListener("click",function(){e.showDayNotesModal(e.currentYear,e.currentMonth,n,i[n])})),t.appendChild(r)},f=1;f<=a;f++)p(f);var h=document.getElementById("export-month-btn"),m=document.getElementById("download-month-btn");h&&h.addEventListener("click",K(U().m(function t(){var r;return U().w(function(t){for(;;)switch(t.n){case 0:return h.disabled=!0,h.textContent="⏳ Экспортируем...",t.n=1,e.exportMonthNotes();case 1:r=t.v,e.showExportNotification(r,!1),h.disabled=!1,h.textContent="📋 Экспорт месяца (".concat(n.length,")");case 2:return t.a(2)}},t)}))),m&&m.addEventListener("click",K(U().m(function t(){var r;return U().w(function(t){for(;;)switch(t.n){case 0:return m.disabled=!0,m.textContent="⏳ Скачиваем...",t.n=1,e.downloadMonthNotes();case 1:r=t.v,e.showExportNotification(r,!0),m.disabled=!1,m.textContent="📥 Скачать .txt (".concat(n.length,")");case 2:return t.a(2)}},t)})))}else console.error("Контейнеры для месячного вида не найдены!")}},{key:"loadYearView",value:(h=K(U().m(function n(){var e,t;return U().w(function(n){for(;;)switch(n.p=n.n){case 0:return console.log("Загрузка годового вида..."),n.p=1,n.n=2,H.getNotesStats(this.currentYear);case 2:e=n.v,console.log("Статистика за год: ".concat(e.totalNotes," записей")),this.updateYearView(e),n.n=4;break;case 3:n.p=3,t=n.v,console.error("Ошибка загрузки годового вида:",t),this.showError("Не удалось загрузить данные за год");case 4:return n.a(2)}},n,this,[[1,3]])})),function(){return h.apply(this,arguments)})},{key:"updateYearView",value:function(n){var e=this,t=document.getElementById("year-calendar-grid"),r=document.querySelector("#year-view h2");if(t&&r){r.textContent="Годовой архив страданий — ".concat(this.currentYear);var o='\n    <div class="year-controls">\n      <div class="export-buttons-group">\n        <button class="export-button" id="export-year-btn" title="Скопировать все записи за год в буфер обмена">\n          📋 Экспорт года ('.concat(n.totalNotes,')\n        </button>\n        <button class="download-button" id="download-year-btn" title="Скачать все записи за год как .txt файл">\n          📥 Скачать .txt (').concat(n.totalNotes,")\n        </button>\n      </div>\n    </div>\n  ");t.parentElement.insertAdjacentHTML("afterbegin",o),t.innerHTML="",t.className="year-calendar-grid";var a=Math.max.apply(Math,function(n){return function(n){if(Array.isArray(n))return q(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||_(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Object.values(n.monthlyStats)).concat([1]));["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"].forEach(function(r,o){var c=n.monthlyStats[o]||0,i=c/a,s=document.createElement("div");s.className="year-month",c>0&&(s.classList.add("has-notes"),i>=.8?s.classList.add("very-high-activity"):i>=.6?s.classList.add("high-activity"):i>=.4?s.classList.add("medium-activity"):s.classList.add("low-activity")),s.innerHTML='\n        <div class="month-header">\n          <span class="month-name">'.concat(r,'</span>\n          <span class="month-number">').concat(o+1,'</span>\n        </div>\n        <div class="month-count">').concat(c,'</div>\n        <div class="month-bar">\n          <div class="month-bar-fill" style="width: ').concat(100*i,'%"></div>\n        </div>\n      '),s.style.cursor="pointer",s.addEventListener("click",function(){e.currentMonth=o,e.switchView("month")}),s.title="".concat(r," ").concat(e.currentYear,": ").concat(c," записей"),t.appendChild(s)});var c=document.getElementById("export-year-btn"),i=document.getElementById("download-year-btn");c&&c.addEventListener("click",K(U().m(function t(){var r;return U().w(function(t){for(;;)switch(t.n){case 0:return c.disabled=!0,c.textContent="⏳ Собираем архив...",t.n=1,e.exportYearNotes();case 1:r=t.v,e.showExportNotification(r,!1),c.disabled=!1,c.textContent="📋 Экспорт года (".concat(n.totalNotes,")");case 2:return t.a(2)}},t)}))),i&&i.addEventListener("click",K(U().m(function t(){var r;return U().w(function(t){for(;;)switch(t.n){case 0:return i.disabled=!0,i.textContent="⏳ Создаём архив...",t.n=1,e.downloadYearNotes();case 1:r=t.v,e.showExportNotification(r,!0),i.disabled=!1,i.textContent="📥 Скачать .txt (".concat(n.totalNotes,")");case 2:return t.a(2)}},t)})))}else console.error("Контейнеры для годового вида не найдены!")}},{key:"setupSearch",value:function(){var n=this;console.log("Настройка поиска...");var e=document.getElementById("search-input"),t=document.getElementById("search-results-list"),r=document.getElementById("search-suggestions");if(e&&t){var o,a="";this.showSearchSuggestions(),e.addEventListener("input",function(e){clearTimeout(o);var c=e.target.value.trim();if(a=c,c.length>0&&r&&(r.innerHTML=""),0===c.length)return n.showSearchSuggestions(),void(t.innerHTML='\n        <div class="search-placeholder">\n          <p>👆 Начните вводить текст для поиска</p>\n          <p>Поиск происходит автоматически по мере ввода</p>\n        </div>\n      ');1!==c.length?(c.length>=2&&(t.innerHTML='\n        <div class="search-loading">\n          <p>🔍 Поиск "'.concat(n.escapeHtml(c),'"...</p>\n        </div>\n      ')),o=setTimeout(K(U().m(function e(){return U().w(function(e){for(;;)switch(e.n){case 0:if(!(c===a&&c.length>=2)){e.n=1;break}return e.n=1,n.performSearch(c);case 1:return e.a(2)}},e)})),300)):t.innerHTML='\n        <div class="search-placeholder">\n          <p>Введите ещё '.concat(2-c.length," символ...</p>\n        </div>\n      ")}),e.addEventListener("keypress",function(){var e=K(U().m(function e(t){var r;return U().w(function(e){for(;;)switch(e.n){case 0:if("Enter"!==t.key){e.n=1;break}if(clearTimeout(o),!((r=t.target.value.trim()).length>=2)){e.n=1;break}return e.n=1,n.performSearch(r);case 1:return e.a(2)}},e)}));return function(n){return e.apply(this,arguments)}}()),e.addEventListener("focus",function(){0===e.value.length&&n.showSearchSuggestions()}),e.addEventListener("blur",function(){setTimeout(function(){0===e.value.length&&r&&(r.innerHTML="")},200)}),e.focus()}else console.error("Элементы поиска не найдены!")}},{key:"performSearch",value:(f=K(U().m(function n(e){var t,r,o,a;return U().w(function(n){for(;;)switch(n.p=n.n){case 0:if(t=document.getElementById("search-results-list"),n.p=1,console.log('Выполняется поиск: "'.concat(e,'"')),r=[],!e.startsWith("#")){n.n=3;break}return o=e.substring(1),n.n=2,H.searchByTags([o],!1);case 2:r=n.v,console.log('Поиск по тегу "'.concat(o,'": найдено ').concat(r.length," записей")),n.n=5;break;case 3:return n.n=4,H.searchNotes(e,{searchInContent:!0,searchInTags:!0,caseSensitive:!1,limit:50});case 4:r=n.v,console.log('Текстовый поиск "'.concat(e,'": найдено ').concat(r.length," записей"));case 5:this.displaySearchResults(r,e),n.n=7;break;case 6:n.p=6,a=n.v,console.error("Ошибка поиска:",a),t.innerHTML='\n      <div class="search-error">\n        <p>❌ Ошибка при выполнении поиска</p>\n        <p>Попробуйте ещё раз или перезагрузите страницу</p>\n        <button onclick="location.reload()" class="retry-button">Перезагрузить</button>\n      </div>\n    ';case 7:return n.a(2)}},n,this,[[1,6]])})),function(n){return f.apply(this,arguments)})},{key:"displaySearchResults",value:function(n,e){var t=this,r=document.getElementById("search-results-list");if(0!==n.length){var o=this.groupSearchResultsByDate(n),a=n.length,c='\n    <div class="search-results-header">\n      <h4>✅ Найдено: '.concat(a,' записей</h4>\n      <p>по запросу <strong>"').concat(this.escapeHtml(e),'"</strong></p>\n      ').concat(a>10?"<p><small>Показаны самые релевантные результаты</small></p>":"","\n    </div>\n  "),i=Object.entries(o).sort(function(n,e){var t=V(n,1)[0],r=V(e,1)[0];return new Date(r)-new Date(t)}).map(function(n){var r=V(n,2),o=r[0],a=r[1],c=new Date(o),i=t.formatSearchDate(c);return'\n        <div class="search-day-group">\n          <h5 class="search-day-header">'.concat(i," (").concat(a.length,')</h5>\n          <div class="search-day-results">\n            ').concat(a.map(function(n){return t.createSearchResultHTML(n,e)}).join(""),"\n          </div>\n        </div>\n      ")}).join("");r.innerHTML=c+i,r.scrollIntoView({behavior:"smooth",block:"start"})}else r.innerHTML='\n      <div class="no-results">\n        <h4>😔 Ничего не найдено</h4>\n        <p>По запросу <strong>"'.concat(this.escapeHtml(e),'"</strong> ничего не найдено</p>\n        <div class="search-tips">\n          <h5>💡 Попробуйте:</h5>\n          <ul>\n            <li>Упростить поисковый запрос</li>\n            <li>Проверить правильность написания</li>\n            <li>Использовать другие ключевые слова</li>\n            <li>Поискать по тегам: <code>#работа</code>, <code>#проект</code></li>\n          </ul>\n        </div>\n      </div>\n    ')}},{key:"groupSearchResultsByDate",value:function(n){var e={};return n.forEach(function(n){var t=n.date.toDateString();e[t]||(e[t]=[]),e[t].push(n)}),e}},{key:"createSearchResultHTML",value:function(n){var e=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=new Date(n.date).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}),o=this.escapeHtml(n.content);if(t&&!t.startsWith("#")){var a=new RegExp("(".concat(this.escapeRegex(t),")"),"gi");o=o.replace(a,"<mark>$1</mark>")}var c=n.tags.map(function(n){if(t.startsWith("#")&&n.toLowerCase().includes(t.substring(1).toLowerCase())){var r=new RegExp("(".concat(e.escapeRegex(t.substring(1)),")"),"gi");return n.replace(r,"<mark>$1</mark>")}return n}),i=c.length>0?'<div class="search-result-tags">'.concat(c.join(" "),"</div>"):"";return'\n    <div class="search-result-item" data-note-id="'.concat(n.id,'">\n      <div class="search-result-header">\n        <span class="search-result-time">').concat(r,'</span>\n        <span class="search-result-id">#').concat(n.id,'</span>\n      </div>\n      <div class="search-result-content">').concat(o,"</div>\n      ").concat(i,"\n    </div>\n  ")}},{key:"showSearchSuggestions",value:(p=K(U().m(function n(){var e,t,r,o,a,c=this;return U().w(function(n){for(;;)switch(n.p=n.n){case 0:if(e=document.getElementById("search-suggestions")){n.n=1;break}return n.a(2);case 1:return n.p=1,n.n=2,H.getPopularTags;case 2:if(!n.v){n.n=4;break}return n.n=3,H.getPopularTags(8);case 3:o=n.v,n.n=5;break;case 4:o=[];case 5:(t=o).length>0?(r='\n        <div class="suggestions">\n          <h5>🏷️ Популярные теги:</h5>\n          <div class="tag-suggestions">\n            '.concat(t.map(function(n){var e=n.tag,t=n.count;return'<button class="tag-suggestion" data-tag="'.concat(e,'" title="').concat(t,' записей">\n                ').concat(e,' <span class="tag-count">(').concat(t,")</span>\n              </button>")}).join(""),'\n          </div>\n          <div class="search-examples">\n            <h5>💡 Примеры поиска:</h5>\n            <div class="example-queries">\n              <button class="example-query" data-query="встреча">встреча</button>\n              <button class="example-query" data-query="#баг">#баг</button>\n              <button class="example-query" data-query="проект">проект</button>\n              <button class="example-query" data-query="#важно">#важно</button>\n            </div>\n          </div>\n        </div>\n      '),e.innerHTML=r,e.querySelectorAll(".tag-suggestion").forEach(function(n){n.addEventListener("click",function(n){var e=n.target.dataset.tag||n.target.closest("[data-tag]").dataset.tag,t=document.getElementById("search-input");t.value=e,t.focus(),c.performSearch(e)})}),e.querySelectorAll(".example-query").forEach(function(n){n.addEventListener("click",function(n){var e=n.target.dataset.query,t=document.getElementById("search-input");t.value=e,t.focus(),c.performSearch(e)})})):e.innerHTML='\n        <div class="suggestions">\n          <div class="search-examples">\n            <h5>💡 Как искать:</h5>\n            <ul>\n              <li><strong>По тексту:</strong> просто введите слово или фразу</li>\n              <li><strong>По тегам:</strong> начните с # (например: #работа)</li>\n              <li><strong>Поиск живой:</strong> результаты появляются по мере ввода</li>\n            </ul>\n          </div>\n        </div>\n      ',n.n=7;break;case 6:n.p=6,a=n.v,console.error("Ошибка загрузки подсказок:",a);case 7:return n.a(2)}},n,null,[[1,6]])})),function(){return p.apply(this,arguments)})},{key:"formatSearchDate",value:function(n){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=new Date(t.getTime()-864e5);if(n>=t)return"🕒 Сегодня";if(n>=r)return"📅 Вчера";var o=Math.floor((t-n)/864e5);return o<=7?"📆 ".concat(o," дней назад"):n.toLocaleDateString("ru-RU",{weekday:"long",day:"numeric",month:"long",year:n.getFullYear()!==e.getFullYear()?"numeric":void 0})}},{key:"escapeRegex",value:function(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}},{key:"copyToClipboard",value:(d=K(U().m(function n(e){var t,r,o;return U().w(function(n){for(;;)switch(n.p=n.n){case 0:if(n.p=0,!navigator.clipboard||!navigator.clipboard.writeText){n.n=2;break}return n.n=1,navigator.clipboard.writeText(e);case 1:return n.a(2,{success:!0,method:"modern"});case 2:if(!document.queryCommandSupported||!document.queryCommandSupported("copy")){n.n=3;break}if((t=document.createElement("textarea")).value=e,t.style.position="fixed",t.style.left="-9999px",t.style.top="-9999px",document.body.appendChild(t),t.focus(),t.select(),r=document.execCommand("copy"),document.body.removeChild(t),!r){n.n=3;break}return n.a(2,{success:!0,method:"fallback"});case 3:throw new Error("Clipboard API не поддерживается в этом браузере");case 4:return n.p=4,o=n.v,console.error("Ошибка копирования:",o),n.a(2,{success:!1,error:o.message});case 5:return n.a(2)}},n,null,[[0,4]])})),function(n){return d.apply(this,arguments)})},{key:"formatNotesForExport",value:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!n||0===n.length)return"📋 Архив Потраченного Времени ".concat(e,"\n\nЗаписей не найдено.");var t="📋 Архив Потраченного Времени ".concat(e,"\n")+"Экспортировано: ".concat((new Date).toLocaleString("ru-RU"),"\n")+"Всего записей: ".concat(n.length,"\n")+"".concat("=".repeat(50),"\n\n"),r=this.groupNotesByDay(n),o=t,a=Object.keys(r).sort(function(n,e){return new Date(e)-new Date(n)});a.forEach(function(n,e){var t=r[n],a=new Date(n),c="📅 ".concat(a.toLocaleDateString("ru-RU",{weekday:"long",day:"numeric",month:"long",year:"numeric"})," (").concat(t.length," записей)");o+="".concat(c,"\n").concat("-".repeat(40),"\n"),t.sort(function(n,e){return new Date(n.date)-new Date(e.date)}).forEach(function(n,e){var t=n.date.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}),r=n.tags.length>0?" ".concat(n.tags.join(" ")):"";o+="".concat(e+1,". [").concat(t,"] ").concat(n.content).concat(r,"\n")}),o+="\n"});var c="".concat("=".repeat(50),"\n")+"Создано в Архиве Потраченного Времени\n"+"Всего дней с записями: ".concat(a.length,"\n")+"Общее количество записей: ".concat(n.length);return o+=c}},{key:"exportTodayNotes",value:(u=K(U().m(function n(){var e,t,r,o,a;return U().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,H.getTodayNotes();case 1:return e=n.v,t=(new Date).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"}),r=this.formatNotesForExport(e,"- ".concat(t)),n.n=2,this.copyToClipboard(r);case 2:return o=n.v,n.a(2,{success:o.success,count:e.length,period:"сегодня",error:o.error});case 3:return n.p=3,a=n.v,console.error("Ошибка экспорта записей за сегодня:",a),n.a(2,{success:!1,error:a.message})}},n,this,[[0,3]])})),function(){return u.apply(this,arguments)})},{key:"exportWeekNotes",value:(l=K(U().m(function n(){var e,t,r,o,a,c;return U().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,this.currentWeekStart||(this.currentWeekStart=this.getWeekStart(new Date)),n.n=1,H.getWeekNotes(this.currentWeekStart);case 1:return e=n.v,(t=new Date(this.currentWeekStart)).setDate(t.getDate()+6),r="- Неделя с ".concat(this.currentWeekStart.toLocaleDateString("ru-RU")," по ").concat(t.toLocaleDateString("ru-RU")),o=this.formatNotesForExport(e,r),n.n=2,this.copyToClipboard(o);case 2:return a=n.v,n.a(2,{success:a.success,count:e.length,period:"неделю",error:a.error});case 3:return n.p=3,c=n.v,console.error("Ошибка экспорта записей за неделю:",c),n.a(2,{success:!1,error:c.message})}},n,this,[[0,3]])})),function(){return l.apply(this,arguments)})},{key:"exportMonthNotes",value:(s=K(U().m(function n(){var e,t,r,o,a;return U().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,H.getMonthNotes(this.currentYear,this.currentMonth);case 1:return e=n.v,t="- ".concat(["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"][this.currentMonth]," ").concat(this.currentYear),r=this.formatNotesForExport(e,t),n.n=2,this.copyToClipboard(r);case 2:return o=n.v,n.a(2,{success:o.success,count:e.length,period:"месяц",error:o.error});case 3:return n.p=3,a=n.v,console.error("Ошибка экспорта записей за месяц:",a),n.a(2,{success:!1,error:a.message})}},n,this,[[0,3]])})),function(){return s.apply(this,arguments)})},{key:"exportYearNotes",value:(i=K(U().m(function n(){var e,t,r,o,a;return U().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,H.getNotesStats(this.currentYear);case 1:return e=n.v,t="- ".concat(this.currentYear," год"),r=this.formatNotesForExport(e.allNotes,t),n.n=2,this.copyToClipboard(r);case 2:return o=n.v,n.a(2,{success:o.success,count:e.totalNotes,period:"год",error:o.error});case 3:return n.p=3,a=n.v,console.error("Ошибка экспорта записей за год:",a),n.a(2,{success:!1,error:a.message})}},n,this,[[0,3]])})),function(){return i.apply(this,arguments)})},{key:"downloadBlob",value:function(n,e){try{var t=URL.createObjectURL(n),r=document.createElement("a");return r.href=t,r.download=e,r.style.display="none",document.body.appendChild(r),r.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),document.body.removeChild(r),setTimeout(function(){URL.revokeObjectURL(t)},100),{success:!0}}catch(n){return console.error("Ошибка скачивания файла:",n),{success:!1,error:n.message}}}},{key:"generateReportFilename",value:function(n,e){var t=new Date,r=t.toISOString().split("T")[0],o=t.toTimeString().split(" ")[0].replace(/:/g,"-"),a=n.replace(/\s+/g,"_").replace(/[^\w\-_]/g,"");return a&&(a="_".concat(a)),"archive_report".concat(a,"_").concat(r,"_").concat(o,".txt")}},{key:"downloadTodayNotes",value:(c=K(U().m(function n(){var e,t,r,o,a,c,i;return U().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,H.getTodayNotes();case 1:return e=n.v,t=(new Date).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"}),r=this.formatNotesForExport(e,"- ".concat(t)),o=new Blob([r],{type:"text/plain;charset=utf-8"}),a=this.generateReportFilename("сегодня",e),c=this.downloadBlob(o,a),n.a(2,{success:c.success,count:e.length,period:"сегодня",filename:a,error:c.error});case 2:return n.p=2,i=n.v,console.error("Ошибка скачивания записей за сегодня:",i),n.a(2,{success:!1,error:i.message})}},n,this,[[0,2]])})),function(){return c.apply(this,arguments)})},{key:"downloadWeekNotes",value:(a=K(U().m(function n(){var e,t,r,o,a,c,i,s;return U().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,this.currentWeekStart||(this.currentWeekStart=this.getWeekStart(new Date)),n.n=1,H.getWeekNotes(this.currentWeekStart);case 1:return e=n.v,(t=new Date(this.currentWeekStart)).setDate(t.getDate()+6),r="- Неделя с ".concat(this.currentWeekStart.toLocaleDateString("ru-RU")," по ").concat(t.toLocaleDateString("ru-RU")),o=this.formatNotesForExport(e,r),a=new Blob([o],{type:"text/plain;charset=utf-8"}),c=this.generateReportFilename("неделя",e),i=this.downloadBlob(a,c),n.a(2,{success:i.success,count:e.length,period:"неделю",filename:c,error:i.error});case 2:return n.p=2,s=n.v,console.error("Ошибка скачивания записей за неделю:",s),n.a(2,{success:!1,error:s.message})}},n,this,[[0,2]])})),function(){return a.apply(this,arguments)})},{key:"downloadMonthNotes",value:(o=K(U().m(function n(){var e,t,r,o,a,c,i,s;return U().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,H.getMonthNotes(this.currentYear,this.currentMonth);case 1:return e=n.v,r="- ".concat((t=["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"])[this.currentMonth]," ").concat(this.currentYear),o=this.formatNotesForExport(e,r),a=new Blob([o],{type:"text/plain;charset=utf-8"}),c=this.generateReportFilename("".concat(t[this.currentMonth],"_").concat(this.currentYear),e),i=this.downloadBlob(a,c),n.a(2,{success:i.success,count:e.length,period:"месяц",filename:c,error:i.error});case 2:return n.p=2,s=n.v,console.error("Ошибка скачивания записей за месяц:",s),n.a(2,{success:!1,error:s.message})}},n,this,[[0,2]])})),function(){return o.apply(this,arguments)})},{key:"downloadYearNotes",value:(r=K(U().m(function n(){var e,t,r,o,a,c,i;return U().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,H.getNotesStats(this.currentYear);case 1:return e=n.v,t="- ".concat(this.currentYear," год"),r=this.formatNotesForExport(e.allNotes,t),o=new Blob([r],{type:"text/plain;charset=utf-8"}),a=this.generateReportFilename("".concat(this.currentYear,"_год"),e.allNotes),c=this.downloadBlob(o,a),n.a(2,{success:c.success,count:e.totalNotes,period:"год",filename:a,error:c.error});case 2:return n.p=2,i=n.v,console.error("Ошибка скачивания записей за год:",i),n.a(2,{success:!1,error:i.message})}},n,this,[[0,2]])})),function(){return r.apply(this,arguments)})},{key:"showExportNotification",value:function(n){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=n.success,r=n.count,o=n.period,a=n.filename,c=n.error,i=document.createElement("div");i.className="export-notification ".concat(t?"success":"error"),i.innerHTML=t?'\n      <div class="notification-content">\n        <span class="notification-icon">'.concat(e?"📥":"✅",'</span>\n        <div class="notification-text">\n          <strong>').concat(e?"Файл скачан!":"Экспорт завершён!","</strong>\n          <p>").concat(e?"Сохранён файл с ".concat(r," записями за ").concat(o):"Скопировано ".concat(r," записей за ").concat(o," в буфер обмена"),"</p>\n          ").concat(a?'<p class="filename">📄 '.concat(a,"</p>"):"","\n        </div>\n      </div>\n    "):'\n      <div class="notification-content">\n        <span class="notification-icon">❌</span>\n        <div class="notification-text">\n          <strong>'.concat(e?"Ошибка скачивания":"Ошибка экспорта","</strong>\n          <p>").concat(c||"Не удалось выполнить операцию","</p>\n        </div>\n      </div>\n    "),document.body.appendChild(i),setTimeout(function(){return i.classList.add("show")},10),setTimeout(function(){i.classList.remove("show"),setTimeout(function(){i.parentNode&&document.body.removeChild(i)},300)},5e3),i.addEventListener("click",function(){i.classList.remove("show"),setTimeout(function(){i.parentNode&&document.body.removeChild(i)},300)})}},{key:"showDayNotesModal",value:function(n,e,t,r){var o=new Date(n,e,t).toLocaleDateString("ru-RU"),a="Записи за ".concat(o,":\n\n");r.forEach(function(n,e){var t=n.date.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"});a+="".concat(e+1,". [").concat(t,"] ").concat(n.content,"\n"),n.tags.length>0&&(a+="   Теги: ".concat(n.tags.join(" "),"\n")),a+="\n"}),alert(a)}},{key:"groupNotesByDay",value:function(n){var e={};return n.forEach(function(n){var t=n.date.toDateString();e[t]||(e[t]=[]),e[t].push(n)}),e}},{key:"getWeekDaysArray",value:function(n){for(var e=[],t=["Понедельник","Вторник","Среда","Четверг","Пятница","Суббота","Воскресенье"],r=0;r<7;r++){var o=new Date(n);o.setDate(n.getDate()+r),e.push({name:t[r],date:o})}return e}},{key:"createCompactNoteHTML",value:function(n){var e=n.date.toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}),t=n.content.length>100?n.content.substring(0,100)+"...":n.content;return'\n      <div class="compact-note" data-note-id="'.concat(n.id,'">\n        <span class="compact-time">').concat(e,'</span>\n        <span class="compact-content">').concat(this.escapeHtml(t),"</span>\n        ").concat(n.tags.length>0?'<span class="compact-tags">'.concat(n.tags.slice(0,2).join(" "),"</span>"):"","\n      </div>\n    ")}},{key:"getMostActiveMonth",value:function(n){var e=0,t=0;return Object.entries(n).forEach(function(n){var r=V(n,2),o=r[0],a=r[1];a>t&&(t=a,e=parseInt(o))}),["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"][e]}},{key:"getWeekStart",value:function(n){var e=new Date(n),t=e.getDay(),r=e.getDate()-t+(0===t?-6:1),o=new Date(e.setDate(r));return o.setHours(0,0,0,0),o}},{key:"isSameDay",value:function(n,e){return n.getFullYear()===e.getFullYear()&&n.getMonth()===e.getMonth()&&n.getDate()===e.getDate()}},{key:"escapeHtml",value:function(n){var e=document.createElement("div");return e.textContent=n,e.innerHTML}},{key:"showError",value:function(n){console.error("ViewManager Error:",n);var e=document.querySelector("[data-view-content]:not([hidden])");if(e){var t='\n        <div class="error-message">\n          <p>⚠️ '.concat(n,'</p>\n          <button onclick="location.reload()">Перезагрузить</button>\n        </div>\n      ');e.innerHTML=t}}},{key:"updateCurrentView",value:(t=K(U().m(function n(){return U().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,this.loadViewData(this.currentView);case 1:return n.a(2)}},n,this)})),function(){return t.apply(this,arguments)})},{key:"initNavigationArrows",value:function(){var n=this,e=document.querySelectorAll("#week-view .nav-arrow");e.length>=2&&(e[0].addEventListener("click",function(){return n.navigateWeek(-1)}),e[1].addEventListener("click",function(){return n.navigateWeek(1)}));var t=document.querySelectorAll("#month-view .nav-arrow");t.length>=2&&(t[0].addEventListener("click",function(){return n.navigateMonth(-1)}),t[1].addEventListener("click",function(){return n.navigateMonth(1)}))}},{key:"navigateWeek",value:function(n){this.currentWeekStart||(this.currentWeekStart=this.getWeekStart(new Date)),this.currentWeekStart.setDate(this.currentWeekStart.getDate()+7*n),this.loadWeekView()}},{key:"navigateMonth",value:function(n){this.currentMonth+=n,this.currentMonth<0?(this.currentMonth=11,this.currentYear--):this.currentMonth>11&&(this.currentMonth=0,this.currentYear++),this.loadMonthView()}},{key:"setupEventListeners",value:function(){var n=this;document.addEventListener("keydown",function(e){if(e.ctrlKey||e.metaKey)switch(e.key){case"1":e.preventDefault(),n.switchView("today");break;case"2":e.preventDefault(),n.switchView("week");break;case"3":e.preventDefault(),n.switchView("month");break;case"4":e.preventDefault(),n.switchView("year");break;case"f":e.preventDefault(),n.switchView("search")}}),console.log("Настроены клавиатурные сокращения: Ctrl+1-4 для переключения видов, Ctrl+F для поиска")}}],e&&J(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,e,t,r,o,a,c,i,s,l,u,d,p,f,h,m,g,v,y,b,w,x,k}();function en(){var n,e,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",o=t.toStringTag||"@@toStringTag";function a(t,r,o,a){var s=r&&r.prototype instanceof i?r:i,l=Object.create(s.prototype);return tn(l,"_invoke",function(t,r,o){var a,i,s,l=0,u=o||[],d=!1,p={p:0,n:0,v:n,a:f,f:f.bind(n,4),d:function(e,t){return a=e,i=0,s=n,p.n=t,c}};function f(t,r){for(i=t,s=r,e=0;!d&&l&&!o&&e<u.length;e++){var o,a=u[e],f=p.p,h=a[2];t>3?(o=h===r)&&(s=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=n):a[0]<=f&&((o=t<2&&f<a[1])?(i=0,p.v=r,p.n=a[1]):f<h&&(o=t<3||a[0]>r||r>h)&&(a[4]=t,a[5]=r,p.n=h,i=0))}if(o||t>1)return c;throw d=!0,r}return function(o,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),i=u,s=h;(e=i<2?n:s)||!d;){a||(i?i<3?(i>1&&(p.n=-1),f(i,s)):p.n=s:p.v=s);try{if(l=2,a){if(i||(o="next"),e=a[o]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,i<2&&(i=0)}else 1===i&&(e=a.return)&&e.call(a),i<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=n}else if((e=(d=p.n<0)?s:t.call(r,p))!==c)break}catch(e){a=n,i=1,s=e}finally{l=1}}return{value:e,done:d}}}(t,o,a),!0),l}var c={};function i(){}function s(){}function l(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(tn(e={},r,function(){return this}),e),d=l.prototype=i.prototype=Object.create(u);function p(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,l):(n.__proto__=l,tn(n,o,"GeneratorFunction")),n.prototype=Object.create(d),n}return s.prototype=l,tn(d,"constructor",l),tn(l,"constructor",s),s.displayName="GeneratorFunction",tn(l,o,"GeneratorFunction"),tn(d),tn(d,o,"Generator"),tn(d,r,function(){return this}),tn(d,"toString",function(){return"[object Generator]"}),(en=function(){return{w:a,m:p}})()}function tn(n,e,t,r){var o=Object.defineProperty;try{o({},"",{})}catch(n){o=0}tn=function(n,e,t,r){function a(e,t){tn(n,e,function(n){return this._invoke(e,t,n)})}e?o?o(n,e,{value:t,enumerable:!r,configurable:!r,writable:!r}):n[e]=t:(a("next",0),a("throw",1),a("return",2))},tn(n,e,t,r)}function rn(n,e,t,r,o,a,c){try{var i=n[a](c),s=i.value}catch(n){return void t(n)}i.done?e(s):Promise.resolve(s).then(r,o)}function on(n){return function(){var e=this,t=arguments;return new Promise(function(r,o){var a=n.apply(e,t);function c(n){rn(a,r,o,c,i,"next",n)}function i(n){rn(a,r,o,c,i,"throw",n)}c(void 0)})}}function an(){var n=document.getElementById("install-pwa-btn");n&&(n.style.display="none")}"serviceWorker"in navigator&&(window.addEventListener("load",on(en().m(function n(){var e,t;return en().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,navigator.serviceWorker.register("/sw.js",{scope:"/",updateViaCache:"none"});case 1:e=n.v,console.log("✅ Workbox Service Worker зарегистрирован:",e.scope),setInterval(function(){e.update()},6e4),e.addEventListener("updatefound",function(){var n=e.installing;n&&n.addEventListener("statechange",function(){var e;"installed"===n.state&&navigator.serviceWorker.controller&&((e=document.createElement("div")).className="export-notification update-notification",e.innerHTML='\n    <div class="notification-content">\n      <span class="notification-icon">🔄</span>\n      <div class="notification-text">\n        <strong>Обновление доступно!</strong>\n        <p>Новая версия приложения готова к установке</p>\n        <button id="update-sw-btn" class="update-button">Обновить сейчас</button>\n      </div>\n    </div>\n  ',document.body.appendChild(e),setTimeout(function(){return e.classList.add("show")},10),e.querySelector("#update-sw-btn").addEventListener("click",function(){navigator.serviceWorker.ready.then(function(n){n.waiting&&n.waiting.postMessage({type:"SKIP_WAITING"})})}),setTimeout(function(){e.classList.remove("show"),setTimeout(function(){return e.remove()},300)},1e4))})}),n.n=3;break;case 2:n.p=2,t=n.v,console.error("❌ Ошибка регистрации Workbox Service Worker:",t);case 3:return n.a(2)}},n,null,[[0,2]])}))),navigator.serviceWorker.addEventListener("message",function(n){n.data&&"CACHE_UPDATED"===n.data.type&&console.log("📦 Кэш обновлён:",n.data.payload)}),navigator.serviceWorker.addEventListener("controllerchange",function(){Q||(window.location.reload(),Q=!0)})),window.addEventListener("beforeinstallprompt",function(n){console.log("PWA готово к установке"),n.preventDefault(),Z=n,function(){var n=document.getElementById("install-pwa-btn");if(!n){(n=document.createElement("button")).id="install-pwa-btn",n.className="install-pwa-button",n.innerHTML="📱 Установить приложение",n.title="Установить Архив Потраченного Времени как приложение";var e=document.getElementById("main-nav");e&&e.appendChild(n)}n.style.display="inline-flex",n.addEventListener("click",on(en().m(function n(){var e,t,r;return en().w(function(n){for(;;)switch(n.p=n.n){case 0:if(Z){n.n=1;break}return n.a(2);case 1:return n.p=1,Z.prompt(),n.n=2,Z.userChoice;case 2:e=n.v,t=e.outcome,console.log("Пользователь ".concat("accepted"===t?"согласился":"отказался"," установить PWA")),Z=null,an(),n.n=4;break;case 3:n.p=3,r=n.v,console.error("Ошибка установки PWA:",r);case 4:return n.a(2)}},n,null,[[1,3]])})))}()}),window.addEventListener("appinstalled",function(){var n;console.log("PWA успешно установлено"),Z=null,an(),(n=document.createElement("div")).className="export-notification success",n.innerHTML='\n    <div class="notification-content">\n      <span class="notification-icon">✅</span>\n      <div class="notification-text">\n        <strong>Приложение установлено!</strong>\n        <p>Архив Потраченного Времени теперь доступен с главного экрана.</p>\n      </div>\n    </div>\n  ',document.body.appendChild(n),setTimeout(function(){return n.classList.add("show")},10),setTimeout(function(){n.classList.remove("show"),setTimeout(function(){return n.remove()},300)},5e3)}),document.addEventListener("DOMContentLoaded",function(){console.log("Архив Потраченного Времени запускается...");var n=new nn;!function(n){var e=document.getElementById("new-note-form"),t=document.getElementById("note-content"),r=document.getElementById("note-tags"),o=document.getElementById("save-note-btn");function a(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Сохранить и страдать дальше";o.disabled=!n,o.textContent=e,t.disabled=!n,r.disabled=!n}e?(e.addEventListener("submit",function(){var e=on(en().m(function e(o){var c,i,s,l,u;return en().w(function(e){for(;;)switch(e.p=e.n){case 0:if(o.preventDefault(),c=t.value.trim(),i=r.value.trim(),c){e.n=1;break}return alert("Эй, мудила! Пустые записи никому не нужны. Напиши хоть что-нибудь осмысленное."),t.focus(),e.a(2);case 1:return s=[],i&&(s=i.split(",").map(function(n){return n.trim()}).filter(function(n){return n.length>0}).map(function(n){return n.startsWith("#")?n:"#".concat(n)})),e.p=2,a(!1,"Сохраняю твои страдания..."),e.n=3,H.addNote(c,s);case 3:return l=e.v,console.log("Запись сохранена с ID: ".concat(l)),t.value="",r.value="",a(!0,"Сохранено!"),setTimeout(function(){a(!0,"Сохранить и страдать дальше")},2e3),t.focus(),e.n=4,n.updateCurrentView();case 4:e.n=6;break;case 5:e.p=5,u=e.v,console.error("Ошибка при сохранении записи:",u),alert("Что-то пошло не так. Твои страдания не сохранились. Проверь консоль."),a(!0);case 6:return e.a(2)}},e,null,[[2,5]])}));return function(n){return e.apply(this,arguments)}}()),t.focus()):console.error("Форма добавления записей не найдена!")}(n),n.switchView("today"),console.log("Приложение готово к использованию")})}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={id:n,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}r.m=e,n=[],r.O=(e,t,o,a)=>{if(!t){var c=1/0;for(u=0;u<n.length;u++){for(var[t,o,a]=n[u],i=!0,s=0;s<t.length;s++)(!1&a||c>=a)&&Object.keys(r.O).every(n=>r.O[n](t[s]))?t.splice(s--,1):(i=!1,a<c&&(c=a));if(i){n.splice(u--,1);var l=o();void 0!==l&&(e=l)}}return e}a=a||0;for(var u=n.length;u>0&&n[u-1][2]>a;u--)n[u]=n[u-1];n[u]=[t,o,a]},r.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return r.d(e,{a:e}),e},r.d=(n,e)=>{for(var t in e)r.o(e,t)&&!r.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"==typeof window)return window}}(),r.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),(()=>{var n={792:0};r.O.j=e=>0===n[e];var e=(e,t)=>{var o,a,[c,i,s]=t,l=0;if(c.some(e=>0!==n[e])){for(o in i)r.o(i,o)&&(r.m[o]=i[o]);if(s)var u=s(r)}for(e&&e(t);l<c.length;l++)a=c[l],r.o(n,a)&&n[a]&&n[a][0](),n[a]=0;return r.O(u)},t=self.webpackChunktime_archive=self.webpackChunktime_archive||[];t.forEach(e.bind(null,0)),t.push=e.bind(null,t.push.bind(t))})(),r.nc=void 0;var o=r.O(void 0,[201],()=>r(239));o=r.O(o)})();